/** Include JSON library **/function update_counter(e,t){t||(t=0);var n=parseInt(joms.jQuery(e).html(),10);t=parseInt(t,10);n<=1?joms.jQuery(e).css("display","none"):joms.jQuery(e).html(n+t)}function get_cookies_array(){var e={};if(document.cookie&&document.cookie!=""){var t=document.cookie.split(";");for(var n=0;n<t.length;n++){var r=t[n].split("=");r[0]=r[0].replace(/^ /,"");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}}return e}var JSON;JSON||(JSON={});(function(){function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e));typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)if(typeof rep[n]=="string"){r=rep[n];i=str(r,a);i&&u.push(quote(r)+(gap?": ":":")+i)}}else for(r in a)if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);i&&u.push(quote(r)+(gap?": ":":")+i)}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return e<10?"0"+e:e}"use strict";if(typeof Date.prototype.toJSON!="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")});typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);r!==undefined?i[n]=r:delete i[n]}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})})();typeof joms=="undefined"&&(joms={jQuery:window.jQuery,extend:function(e){this.jQuery.extend(this,e)}});var joms_message_sending=!1;joms.extend({plugins:{extend:function(e){joms.jQuery.extend(joms.plugins,e)},initialize:function(){joms.jQuery.each(joms.plugins,function(e,t){try{t.initialize()}catch(n){}})}},activities:{init:function(){joms.jQuery("#activity-stream-container li[data-streamid] [href=#deletePost]").live("click",function(){joms.activities.remove("",joms.jQuery(this).parents("[data-streamid]").data("streamid"))});joms.activities.initMap();joms.activities.loadNewStream()},showMap:function(e,t){if(joms.jQuery("li[data-streamid="+e+"]").find(".cMapHeatzone").length==0){var n=joms.jQuery("li[data-streamid="+e+"]").find(".cStream-Actions").width(),r='<div class="cMapFade">';r+='<div class="cMapHeatzone"> </div>';r+='<div class="cMapFiller"></div>';r+='<img src="http://maps.google.com/maps/api/staticmap?center='+t+"&amp;zoom=14&amp;size="+n+"x150&amp;sensor=false&amp;markers=color:red|"+t+'" />';r+='<img src="http://maps.google.com/maps/api/staticmap?center='+t+"&amp;zoom=5&amp;size="+n+"x150&amp;sensor=false&amp;markers=color:red|"+t+'" />';r+='<img src="http://maps.google.com/maps/api/staticmap?center='+t+"&amp;zoom=2&amp;size="+n+"x150&amp;sensor=false&amp;markers=color:red|"+t+'" />';r+="</div>";joms.jQuery("#newsfeed-map-"+e+" .newsfeed-mapFade").append(r);joms.jQuery("li[data-streamid="+e+"]").find(".cStream-Actions").prepend(r);var i=n/2-15;joms.jQuery("li[data-streamid="+e+"]").find(".cMapHeatzone").css({top:"40px",left:i+"px"});joms.maps.init()}if(joms.jQuery("#video-"+e).length){var n=joms.jQuery("#video-"+e).find(".video-map-location").width(),r='<img src="http://maps.google.com/maps/api/staticmap?center='+t+"&amp;zoom=5&amp;size="+n+"x250&amp;sensor=false&amp;markers=color:red|"+t+'" />';if(joms.jQuery(".video-map").height()==0){joms.jQuery("#video-"+e).find(".video-map-location").html(r);joms.jQuery("#video-"+e).find(".video-map").css({height:"auto"})}else{joms.jQuery("#video-"+e).find(".video-map-location").html("");joms.jQuery("#video-"+e).find(".video-map").css({height:"auto"})}}},getContent:function(e){jax.call("community","activities,ajaxGetContent",e)},setContent:function(e,t){joms.jQuery("#profile-newsfeed-item-content-"+e).html(t).removeClass("small profile-newsfeed-item-action").addClass("newsfeed-content-hidden").slideDown()},showVideo:function(e){joms.jQuery("#profile-newsfeed-item-content-"+e+" .video-object").slideDown();joms.jQuery("#profile-newsfeed-item-content-"+e+" .video-object embed").css("width",joms.jQuery("#profile-newsfeed-item-content-"+e).width())},selectCustom:function(e){if(e=="predefined"){joms.jQuery("#custom-text").css("display","none");joms.jQuery("#custom-predefined").css("display","block")}else{joms.jQuery("#custom-text").css("display","block");joms.jQuery("#custom-predefined").css("display","none")}},addCustom:function(){if(joms.jQuery("input[name=custom-message]:checked").val()=="predefined"){var e=joms.jQuery("#custom-predefined").val(),t=joms.jQuery("#custom-predefined :selected").html();e!="default"&&jax.call("community","activities,ajaxAddPredefined",e,t)}else{customText=joms.jQuery.trim(joms.jQuery("#custom-text").val());customText.length!=0&&jax.call("community","activities,ajaxAddPredefined","system.message",customText)}},append:function(e){var t=joms.jQuery(e).find("ul.cStreamList li");joms.jQuery("#activity-more,#activity-exclusions").remove();joms.jQuery("#activity-stream-container ul.cStreamList").append(e);joms.jQuery("body").focus()},initMap:function(){if(joms.jQuery(".newsfeed-mapFade")!=null||joms.jQuery(".newsfeed-map-heatzone")!=null)if(joms.jQuery(".newsfeed-mapFade").length){joms.jQuery(".newsfeed-mapFade").live("mouseover",function(e){joms.jQuery(this).find("img:eq(2)").fadeOut(0)});joms.jQuery(".newsfeed-mapFade").live("mouseout",function(e){joms.jQuery(this).find("img:eq(2)").fadeIn(0)});joms.jQuery(".newsfeed-map-heatzone").live("mouseover",function(e){joms.jQuery(this).parent().find("img:eq(1)").fadeOut()});joms.jQuery(".newsfeed-map-heatzone").live("mouseout",function(e){joms.jQuery(this).parent().find("img:eq(1)").fadeIn(0)})}},more:function(){var e=joms.jQuery("#activity-stream-container ul.cStreamList"),t="";e.find("li[data-streamid]").length!=0&&(t=e.find("li[data-streamid]").last().data("streamid"));var n="",r="";joms.jQuery("#apptype").length!=0&&(n=joms.jQuery("#apptype").val());joms.jQuery("#appid").length!=0&&(r=joms.jQuery("#appid").val());var i=e.data("filter"),s=e.data("filterid");joms.jQuery("#activity-more .more-activity-text").hide();joms.jQuery("#activity-more .loading").show();jax.call("community","activities,ajaxGetOlderActivities",t,i,s)},prependOldStream:function(e){var t=joms.jQuery(e).find("li");joms.jQuery("li[data-streamid]").last().after(t);joms.jQuery("#activity-more .more-activity-text").show();joms.jQuery("#activity-more .loading").hide()},loadNewStream:function(){var e=joms.jQuery("#activity-stream-container ul.cStreamList");jax.loadingFunction=function(){};jax.call("community","activities,ajaxGetRecentActivitiesCount",e.find("li[data-streamid]").first().data("streamid"),e.data("filter"),e.data("filterid"))},announceNewStream:function(e,t,n){e>0?joms.jQuery(".joms-latest-activities-container").html('<div class="cAlert alert-success"><a href="#showNewStream" onclick="joms.activities.showNewStream();">'+n+"</div>").show():joms.jQuery(".joms-latest-activities-container").hide();t!=0&&setTimeout("joms.activities.loadNewStream()",t)},appendNewStream:function(e,t){var n=joms.jQuery(e).find("li");joms.jQuery("li[data-streamid]").first().before(n);joms.jQuery(".joms-latest-activities-container").html("").hide()},showNewStream:function(){var e=joms.jQuery("#activity-stream-container ul.cStreamList");jax.call("community","activities,ajaxGetRecentActivities",e.find("li[data-streamid]").first().data("streamid"),e.data("filter"),e.data("filterid"))},remove:function(e,t){var n="jax.call('community', 'activities,ajaxConfirmDeleteActivity', '"+e+"', '"+t+"');";cWindowShow(n,"",450,100)}},apps:{windowTitle:"",toggle:function(e){joms.jQuery(e).children(".app-box-actions").slideToggle("fast");joms.jQuery(e).children(".app-box-footer").slideToggle("fast");joms.jQuery(e).children(".app-box-content").slideToggle("fast",function(){joms.jQuery.cookie(e,joms.jQuery(this).css("display"));joms.jQuery(e).toggleClass("collapse",joms.jQuery(this).css("display")=="none")})},showAboutWindow:function(e){var t="jax.call('community', 'apps,ajaxShowAbout', '"+e+"');";cWindowShow(t,"",450,100)},showPrivacyWindow:function(e){var t="jax.call('community', 'apps,ajaxShowPrivacy', '"+e+"');";cWindowShow(t,"",450,100)},showSettingsWindow:function(e,t){var n="jax.call('community', 'apps,ajaxShowSettings', '"+e+"', '"+t+"');";cWindowShow(n,"",450,100)},savePrivacy:function(){var e=joms.jQuery("input[name=privacy]:checked").val(),t=joms.jQuery("input[name=appname]").val();jax.call("community","apps,ajaxSavePrivacy",t,e)},saveSettings:function(){jax.call("community","apps,ajaxSaveSettings",jax.getFormValues("appSetting"))},remove:function(e){var t="jax.call('community', 'apps,ajaxRemove', '"+e+"');";cWindowShow(t,this.windowTitle,450,100)},add:function(e){jax.call("community","apps,ajaxAdd",e)},initToggle:function(){joms.jQuery(".app-box").each(function(){var e="#"+joms.jQuery(this).attr("id");if(joms.jQuery.cookie(e)=="none"){joms.jQuery(e).addClass("collapse");joms.jQuery(e).children(".app-box-actions").css("display","none");joms.jQuery(e).children(".app-box-footer").css("display","none");joms.jQuery(e).children(".app-box-content").css("display","none")}})}},bookmarks:{show:function(e){var t="jax.call('community', 'bookmarks,ajaxShowBookmarks','"+e+"');";cWindowShow(t,"",450,100)},email:function(e){var t=jax.getFormValues("bookmarks-email"),n=t[1][1],r=t[0][1],i="jax.call('community', 'bookmarks,ajaxEmailPage','"+e+"','"+r+"',\""+n+'");';cWindowShow(i,"",450,100)}},report:{emptyMessage:"",checkReport:function(){if(joms.jQuery("#report-message").val()==""){joms.jQuery("#report-message-error").html(this.emptyMessage).css("color","red");return!1}return!0},showWindow:function(e,t){var n='jax.call("community" , "system,ajaxReport" , "'+e+'","'+location.href+'" ,'+t+");";cWindowShow(n,"",450,100)},submit:function(e,t,n){if(joms.report.checkReport()){var r=jax.getFormValues("report-form"),i='jax.call("community", "system,ajaxSendReport","'+e+'","'+location.href+'","'+r[1][1]+'" , '+n+")";cWindowShow(i,"",450,100)}}},featured:{add:function(e,t){var n="jax.call('community', '"+t+",ajaxAddFeatured', '"+e+"');";cWindowShow(n,"",450,100)},remove:function(e,t){var n="jax.call('community','"+t+",ajaxRemoveFeatured','"+e+"');";cWindowShow(n,"",450,100)}},flash:{enabled:function(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(t){return"6,0,0"}}catch(t){}return(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){}}return!1}},invitation:{showForm:function(e,t,n,r,i){var s='jax.call("community", "system,ajaxShowInvitationForm","'+e+'","'+t+'","'+n+'","'+r+'","'+i+'")',o=520;o=r!="0"?o:o-108;o=i!="0"?o:o-108;cWindowShow(s,"",550,o)},send:function(e,t){jax.call("community","system,ajaxSubmitInvitation",e,t,jax.getFormValues("community-invitation-form"))},selectMember:function(e){if(joms.jQuery(e+" input").is(":checked")){joms.jQuery(e).clone().appendTo("#community-invited-list");joms.jQuery(e).remove();joms.jQuery(e).addClass("invitation-item-invited").children(".invitation-checkbox").show()}else joms.jQuery(e).remove()},selectMemberUnique:function(e){if(joms.jQuery(e+" input").is(":checked")){joms.jQuery("#community-invited-list").empty();joms.jQuery(e).clone().appendTo("#community-invited-list");joms.jQuery(e).remove();joms.jQuery(e).addClass("invitation-item-invited").children(".invitation-checkbox").show()}else joms.jQuery(e).remove()},filterMember:function(){joms.jQuery("#community-invitation-list li").each(function(e){element=joms.jQuery(this).attr("id");joms.jQuery("#community-invited-list #"+element).is("li")&&joms.jQuery(this).remove();joms.jQuery("#inbox-selected-to").length>0&&joms.jQuery("#inbox-selected-to #"+element).is("li")&&joms.jQuery(this).remove()})},showResult:function(){joms.jQuery("#cInvitationTabContainer div").removeClass("active");joms.jQuery("#cInvitationTabContainer #community-invitation").addClass("active")},showSelected:function(){joms.jQuery("#cInvitationTabContainer div").removeClass("active");joms.jQuery("#cInvitationTabContainer #community-invited").addClass("active")},selectNone:function(e){joms.jQuery(e).find("li").each(function(){joms.jQuery(this).remove()})},selectAll:function(e){joms.jQuery(e).find("li").each(function(){joms.jQuery(this).find("input").attr("checked","checked");joms.jQuery(this).find("input").attr("checked")&&joms.invitation.selectMember("#"+joms.jQuery(this).attr("id"))})}},memberlist:{submit:function(){if(joms.jQuery("input#title").val()==""){joms.jQuery("#filter-title-error").show();return!1}if(joms.jQuery("textarea#description").val()==""){joms.jQuery("#filter-description-error").show();return!1}joms.jQuery("#jsform-memberlist-addlist").submit()},showSaveForm:function(e,t){var e=e.split(","),n=Array(),r=joms.jQuery("#avatar:checked").val()!=1?0:1;for(var i=0;i<e.length;i++){var s=new Array,o="",u=e[i];t["fieldType"+u]!="date"&&t["fieldType"+u]!="birthdate"||t["condition"+u]!="between"?o=t["value"+e[i]]:o=t["value"+e[i]]+","+t["value"+e[i]+"_2"];n[i]=new Array("field="+t["field"+e[i]],"condition="+t["condition"+e[i]],"fieldType="+t["fieldType"+e[i]],"value="+o)}var a="";for(var f=0;f<n.length;f++){a+='"'+n[f]+'"';f+1!=n.length&&(a+=",")}var l='jax.call("community", "memberlist,ajaxShowSaveForm","'+joms.jQuery("input[name=operator]:checked").val()+'","'+r+'",'+a+");";cWindowShow(l,"",470,300)}},notifications:{showWindow:function(){var e='jax.call("community", "notification,ajaxGetNotification", "")';cWindowShow(e,"",450,100)},updateNotifyCount:function(){var e=joms.jQuery("#toolbar-item-notify-count").text();if(joms.jQuery.trim(e)!=""&&e>0){e-=1;joms.jQuery("#toolbar-item-notify-count").html(e);if(e==0){joms.jQuery("#toolbar-item-notify").hide();setTimeout("cWindowHide()",1e3)}}},showRequest:function(){var e='jax.call("community", "notification,ajaxGetRequest", "")';cMiniWindowShow(e,"",450,100)},showInbox:function(){var e='jax.call("community", "notification,ajaxGetInbox", "")';cMiniWindowShow(e,"",450,100)},showUploadPhoto:function(e,t){var n='jax.call("community", "photos,ajaxUploadPhoto","'+e+'","'+t+'")';cWindowShow(n,"",600,400)}},filters:{bind:function(){var e=this.loading;joms.jQuery(document).ready(function(){joms.jQuery(".newest-member").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetNewestMember",frontpageUsers)}});joms.jQuery(".active-member").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetActiveMember",frontpageUsers)}});joms.jQuery(".popular-member").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetPopularMember",frontpageUsers)}});joms.jQuery(".featured-member").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetFeaturedMember",frontpageUsers)}});joms.jQuery(".all-activity").bind("click",function(){e(joms.jQuery(this).attr("class"));joms.ajax.call("frontpage,ajaxGetActivities",["all"],{success:function(){alert("asdfsaf")}});joms.jQuery(".all-activity").parents("li.filter").addClass("active").siblings().removeClass("active")});joms.jQuery(".me-and-friends-activity").bind("click",function(){e(joms.jQuery(this).attr("class"));joms.ajax.call("frontpage,ajaxGetActivities",["me-and-friends"],{success:function(){}});joms.jQuery(".me-and-friends-activity").parents("li.filter").addClass("active").siblings().removeClass("active")});joms.jQuery(".active-profile-and-friends-activity").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetActivities","active-profile-and-friends",joms.user.getActive())}});joms.jQuery(".active-profile-activity").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetActivities","active-profile",joms.user.getActive())}});joms.jQuery(".p-active-profile-and-friends-activity").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetActivities","active-profile-and-friends",joms.user.getActive(),"profile")}});joms.jQuery(".p-active-profile-activity").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetActivities","active-profile",joms.user.getActive(),"profile")}});joms.jQuery(".newest-videos").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetNewestVideos",frontpageVideos)}});joms.jQuery(".popular-videos").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetPopularVideos",frontpageVideos)}});joms.jQuery(".featured-videos").bind("click",function(){if(!joms.jQuery(this).hasClass("active-state")){e(joms.jQuery(this).attr("class"));jax.call("community","frontpage,ajaxGetFeaturedVideos",frontpageVideos)}});joms.jQuery(".popular-member").css("border-right","0").css("padding-right","0")})},loading:function(e){elParent=joms.jQuery("."+e).parent().parent().attr("id");typeof elParent=="undefined"&&(elParent=joms.jQuery("."+e).parent().attr("id"));joms.jQuery("#"+elParent+" .loading").show();joms.jQuery("#"+elParent+" a").removeClass("active-state");joms.jQuery("."+e).addClass("active-state")},hideLoading:function(){joms.jQuery(".loading").hide();joms.jQuery(".jomTipsJax").addClass("jomTips");joms.tooltip.setup()}},groups:{invitation:{accept:function(e){jax.call("community","groups,ajaxAcceptInvitation",e)},reject:function(e){jax.call("community","groups,ajaxRejectInvitation",e)}},addInvite:function(e){var t=joms.jQuery("#"+e).parent().attr("id");t=="friends-list"?joms.jQuery("#friends-invited").append(joms.jQuery("#"+e)).html():joms.jQuery("#friends-list").append(joms.jQuery("#"+e)).html()},removeTopic:function(e,t,n){var r='jax.call("community","groups,ajaxShowRemoveDiscussion", "'+t+'","'+n+'");';cWindowShow(r,e,450,100)},lockTopic:function(e,t,n){var r='jax.call("community","groups,ajaxShowLockDiscussion", "'+t+'","'+n+'");';cWindowShow(r,e,450,100)},editBulletin:function(){joms.jQuery("#bulletin-edit-data").css("display")=="none"?joms.jQuery("#bulletin-edit-data").show():joms.jQuery("#bulletin-edit-data").hide()},removeBulletin:function(e,t,n){var r='jax.call("community", "groups,ajaxShowRemoveBulletin", "'+t+'","'+n+'");';cWindowShow(r,e,450,100)},unpublish:function(e){jax.call("community","groups,ajaxUnpublishGroup",e)},leave:function(e){var t='jax.call("community", "groups,ajaxShowLeaveGroup", "'+e+'");';cWindowShow(t,"",450,100)},join:function(e,t){jax.call("community","groups,ajaxJoinGroup",[e],[t])},joinComplete:function(e){joms.jQuery("input#join").val(e);joms.jQuery(".loading-icon").hide();joms.jQuery("#add-reply").show();joms.jQuery("#add-reply").click(function(){joms.jQuery("div#community-groups-wrap").hide();joms.jQuery("textarea#wall-message").css("width","100%");joms.jQuery(".reply-form").show()})},edit:function(){joms.jQuery("#community-group-info .cdata").each(function(){joms.jQuery(this).next().html()&&joms.jQuery(this).css("display")!="none"?joms.jQuery(this).css("display","none"):joms.jQuery(this).css("display","block")});joms.jQuery("#community-group-info .cinput").each(function(){joms.jQuery(this).css("display")=="none"?joms.jQuery(this).css("display","block"):joms.jQuery(this).css("display","none")});joms.jQuery("div#community-group-info-actions").css("display")!="none"?joms.jQuery("div#community-group-info-actions").css("display","none"):joms.jQuery("div#community-group-info-actions").css("display","block")},save:function(e){var t=joms.jQuery("#community-group-name").val(),n=joms.jQuery("#community-group-description").val(),r=joms.jQuery("#community-group-website").val(),i=joms.jQuery("#community-group-category").val(),s=joms.jQuery("input[@name='group-approvals']:checked").val();jax.call("community","groups,ajaxSaveGroup",e,t,n,r,i,s)},update:function(e,t,n,r){joms.jQuery("#community-group-data-name").html(e);joms.jQuery("#community-group-data-description").html(t);joms.jQuery("#community-group-data-website").html(n);joms.jQuery("#community-group-data-category").html(r);this.edit()},deleteGroup:function(e){var t="jax.call('community', 'groups,ajaxWarnGroupDeletion', '"+e+"');";cWindowShow(t,"",450,100,"error")},toggleSearchSubmenu:function(e){joms.jQuery(e).next("ul").toggle().find("input[type=text]").focus()},confirmMemberRemoval:function(e,t){var n=function(){jax.call("community","groups,ajaxConfirmMemberRemoval",e,t)};cWindowShow(n,"",450,80,"warning")},removeMember:function(e,t){var n=joms.jQuery("#cWindow input[name=block]").attr("checked");n?jax.call("community","groups,ajaxBanMember",e,t):jax.call("community","groups,ajaxRemoveMember",e,t)}},photos:{multiUpload:{label:{filename:"Filename",size:"Size",status:"Status",filedrag:"Drag files here.",addfiles:"Add Files",startupload:"Start Upload",invalidfiletype:"Invalid File Type",exceedfilesize:"Image file size exceeded limit",stopupload:"Stop Upload"},groupid:"",noticeDivId:"photoUploaderNotice",defaultMsg:"",groupEmptyValidateMsg:"",uploadingCreateMsg:"",uploadingSelectMsg:"",refreshNeeded:!1,defaultUploadUrl:"index.php?option=com_community&view=photos&task=multiUpload",maxFileSize:"10mb",_init:function(e,t){e!=undefined&&parseInt(e)>0&&(joms.photos.multiUpload.groupid=e);if(t!=undefined&&typeof t=="object")for(var n in t)joms.photos.multiUpload[n]=t[n];pluploader=joms.jQuery("#multi_uploader").pluploadQueue({runtimes:"gears,html5,browserplus,html4",url:"index.php?option=com_community&view=photos&task=multiUpload",max_file_size:joms.photos.multiUpload.maxFileSize,chunk_size:joms.photos.multiUpload.maxFileSize,unique_names:!0,resize:{width:2100,height:2100,quality:90},filters:[{title:"Image files",extensions:"jpg,gif,png,jpeg"}],flash_swf_url:"components/com_community/assets/multiupload_js/plupload.flash.swf",silverlight_xap_url:"components/com_community/assets/multiupload_js/plupload.silverlight.xap",preinit:{Init:function(e,t){joms.photos.multiUpload.log("[Init]","Info:",t,"Features:",e.features)},BeforeUpload:function(){if(joms.jQuery("#new-album").css("display")=="inline"){if(joms.photos.multiUpload.groupid!=""&&joms.jQuery("#album-name").val()==""){joms.photos.multiUpload.stopUploading();alert(joms.photos.multiUpload.groupEmptyValidateMsg);return}joms.photos.multiUpload.stopUploading();var e=joms.jQuery("#album-name").val().trim();jax.call("community","photos,ajaxCreateAlbum",e,joms.photos.multiUpload.groupid)}else{var t=joms.jQuery("#albumid option:selected").html(),n=joms.photos.multiUpload.uploadingSelectMsg.replace("%1$s","<strong>"+t+"</strong>");joms.photos.multiUpload.displayNotice(n);joms.photos.multiUpload.assignUploadUrl(joms.photos.multiUpload.getSelectedAlbumId())}joms.photos.multiUpload.hideShowInput(!0);joms.jQuery("#photo-uploader").css("overflow","hidden")},UploadFile:function(e,t){joms.photos.multiUpload.log("[UploadFile]",t);joms.jQuery(".plupload_start").addClass("plupload_disabled")},FileUploaded:function(e,t,n){try{var r=joms.jQuery.parseJSON(n.response)}catch(i){joms.photos.multiUpload.removeQueue(t.id);pluploader.pluploadQueue().stop();joms.photos.multiUpload.displayNotice("<strong>Error Uploading.</strong>")}var s=pluploader.pluploadQueue().getFile(t.id);if(r!=undefined&&s!=undefined)if(r.error!=undefined&&r.photoId==""){joms.photos.multiUpload.removeQueue(t.id);joms.jQuery("#upload-footer").show();joms.jQuery("#message-between").hide();joms.jQuery(".add-more").hide();try{pluploader.pluploadQueue().stop()}catch(i){}joms.photos.multiUpload.showThumbnail();joms.photos.multiUpload.displayNotice("<strong>"+r.msg+"</strong>");joms.jQuery(".plupload_file_name span").bind("click",function(e){joms.photos.multiUpload.editTitle(e)})}else{s.imgSrc=r.info;s.photoId=r.photoId;joms.photos.multiUpload.refreshNeeded=!0}},FilesAdded:function(e,t){joms.jQuery(".plupload_file_name span").unbind("click");joms.jQuery(".plupload_button.plupload_start").show();joms.jQuery(".plupload_button.plupload_start").css("display","inline-block")},FilesRemoved:function(e,t){pluploader.pluploadQueue().files.length==0&&joms.jQuery(".plupload_button.plupload_start").hide()},UploadComplete:function(e){joms.photos.multiUpload.uploadCompleteShow();setTimeout("joms.photos.multiUpload.showThumbnail(); joms.photos.multiUpload.enableEditTitle();",1e3)}},init:{Refresh:function(e){joms.photos.multiUpload.log("[Refresh]")},StateChanged:function(e){joms.photos.multiUpload.log("[StateChanged]",e.state==plupload.STARTED?"STARTED":"STOPPED")},QueueChanged:function(e){joms.photos.multiUpload.log("[QueueChanged]")},UploadProgress:function(e,t){joms.photos.multiUpload.log("[UploadProgress]","File:",t,"Total:",e.total)},FilesAdded:function(e,t){joms.photos.multiUpload.log("[FilesAdded]");plupload.each(t,function(e){joms.photos.multiUpload.log("  File:",e)})},FilesRemoved:function(e,t){joms.photos.multiUpload.log("[FilesRemoved]");plupload.each(t,function(e){joms.photos.multiUpload.log("  File:",e)})},FileUploaded:function(e,t,n){joms.photos.multiUpload.log("[FileUploaded] File:",t,"Info:",n)},ChunkUploaded:function(e,t,n){joms.photos.multiUpload.log("[ChunkUploaded] File:",t,"Info:",n)},Error:function(e,t){t.file?joms.photos.multiUpload.log("[error]",t,"File:",t.file):joms.photos.multiUpload.log("[error]",t)}}});(pluploader.pluploadQueue().runtime=="html4"||joms.jQuery.browser.msie&&parseInt(joms.jQuery.browser.version.substr(0,1))<=7||joms.jQuery.browser.mozilla&&joms.jQuery.browser.version.slice(0,3)==1.9)&&joms.photos.multiUpload.getBrowserNotSupport();joms.jQuery(".plupload_button.plupload_start").hide();joms.jQuery("#cwin_close_btn").click(function(){joms.photos.multiUpload.refreshNeeded&&joms.photos.multiUpload.refreshBrowser()})},log:function(){var e="";plupload.each(arguments,function(t){var n="";if(typeof t!="string"){plupload.each(t,function(e,r){if(t instanceof plupload.File)switch(e){case plupload.QUEUED:e="QUEUED";break;case plupload.UPLOADING:e="UPLOADING";break;case plupload.FAILED:e="FAILED";break;case plupload.DONE:e="DONE"}typeof e!="function"&&(n+=(n?", ":"")+r+"="+e)});e+=n+" "}else e+=t+" "});joms.jQuery("#log").val(joms.jQuery("#log").val()+e+"\r\n")},getSelectedAlbumId:function(){return typeof pluploader=="undefined"?!1:joms.jQuery("#album-name").length<=0?!1:joms.jQuery("#album-name").attr("albumid")!=undefined&&parseInt(joms.jQuery("#album-name").attr("albumid"))>0&&joms.jQuery("#new-album").css("display")=="inline"?joms.jQuery("#album-name").attr("albumid"):joms.jQuery("#albumid").val()},showThumbnail:function(){var e=pluploader.pluploadQueue();for(var t=0;t<e.files.length;t++){var n=document.createElement("img");n.id="plupload_"+e.files[t].id;n.setAttribute("class","plupupload_thumbnail");n.src=e.files[t].imgSrc;joms.jQuery("#"+e.files[t].id+".plupload_done .plupload_file_name").append(n)}var r=joms.jQuery("#albumid option:selected").html(),i=joms.photos.multiUpload.uploadedCompleteMsg.replace("%1$s","<strong>"+r+"</strong>");joms.photos.multiUpload.displayNotice(i)},assignUploadUrl:function(e){if(typeof pluploader=="undefined")return!1;var t=joms.photos.multiUpload.defaultUploadUrl;t.match(/&+/)?t=t+"&albumid="+e:t=t+"?albumid="+e;joms.jQuery("#multi_uploader").pluploadQueue().settings.url=t},assignNewAlbum:function(e,t){if(typeof pluploader=="undefined")return!1;if(joms.jQuery("#albumid").length<=0)return!1;if(t!=undefined){var n=t,r=new Option(n,e);joms.jQuery("#albumid").append(r).val(e);joms.photos.multiUpload.assignUploadUrl(e);joms.jQuery("#album-name").val("")}else{joms.jQuery("#albumid").val(e);var n=joms.jQuery("#albumid option:selected").html()}var i=joms.photos.multiUpload.uploadingCreateMsg.replace("%1$s","<strong>"+n+"</strong>");joms.photos.multiUpload.displayNotice(i);joms.photos.multiUpload.showExistingAlbum();setTimeout("joms.jQuery('#multi_uploader').pluploadQueue().start()",500)},showExistingAlbum:function(){joms.jQuery("#select-album").css("display","inline");joms.jQuery("#new-album").hide();joms.jQuery("#newalbum").hide();pluploader.pluploadQueue().files.length>0&&joms.jQuery(".plupload_start").removeClass("plupload_disabled")},createNewAlbum:function(){joms.jQuery("#select-album").hide();joms.jQuery("#newalbum").show();joms.jQuery("#new-album").css("display","inline")},startUploading:function(){joms.jQuery("#multi_uploader").pluploadQueue().start()},stopUploading:function(){joms.jQuery("#multi_uploader").pluploadQueue().stop()},goToAlbum:function(e){document.location.href=e},getBrowserNotSupport:function(){jax.call("community","photos,ajaxGotoOldUpload",joms.photos.multiUpload.getSelectedAlbumId(),joms.photos.multiUpload.groupid)},goToOldUpload:function(e){document.location.href=e},refreshBrowser:function(){window.location.reload()},updateLabel:function(e){e=joms.jQuery.parseJSON(e);var t=["filename","size","status","filedrag","addfiles","startupload","stopupload"];for(var n=0;n<t.length;n++)typeof e[t[n]]!="undefined"&&e[t[n]]!=""&&(joms.photos.multiUpload.label[t[n]]=e[t[n]])},enableEditTitle:function(){if(joms.jQuery(".plupload_file_name span").length>0){joms.jQuery(".plupload_file_name span").unbind("click");joms.jQuery(".plupload_file_name span").bind("click",function(e){joms.photos.multiUpload.editTitle(e)})}},editTitle:function(e){joms.jQuery(".plupload_file_name span").unbind("click");var t=e.target?e.target:e.which,n=joms.jQuery(t).parent().parent().attr("id"),r='<input type="text" target="'+n+'" name="photoTitle" value="'+joms.jQuery(t).html()+'" />';joms.jQuery(t).html(r);joms.jQuery(t).find("input").unbind("keypress").unbind("focusout");joms.jQuery(t).find("input").bind("keypress",function(e){keyCode=e.keyCode;if(keyCode==13){joms.photos.multiUpload.saveCaption(this,joms.jQuery(this).parent());joms.jQuery(".plupload_file_name span").bind("click",function(e){joms.photos.multiUpload.editTitle(e)})}});joms.jQuery(t).find("input").bind("focusout",function(){joms.photos.multiUpload.saveCaption(this,joms.jQuery(this).parent());joms.jQuery(".plupload_file_name span").bind("click",function(e){joms.photos.multiUpload.editTitle(e)})})},saveCaption:function(e,t){var n=joms.jQuery(e).attr
("target"),r=pluploader.pluploadQueue().getFile(n),i=joms.jQuery(e).val();r.name=i;var s=encodeURIComponent(i);jax.call("community","photos,ajaxSaveCaption",r.photoId,s,!1);joms.jQuery(t).html(i)},displayNotice:function(e){joms.jQuery("#"+joms.photos.multiUpload.noticeDivId).html(e)},hideShowInput:function(e){if(e!=undefined&&e===!0){joms.jQuery("#upload-header").hide();joms.jQuery(".custom_plupload_buttons").hide()}else{joms.jQuery("#upload-header").show();joms.jQuery(".custom_plupload_buttons").show();joms.jQuery(".plupload_button.plupload_start").hide()}},uploadCompleteShow:function(){joms.jQuery("div#upload-footer").show();joms.ajax.call("photos,ajaxUpdateCounter",[joms.photos.multiUpload.getSelectedAlbumId()])},removeQueue:function(e){var t=pluploader.pluploadQueue().files,n=[],r=0;for(var i=0;i<t.length;i++)if(t[i].id==e){n[r]=t[i];r++}else if(r>0){n[r]=t[i];r++}for(var i=0;i<n.length;i++){pluploader.pluploadQueue().removeFile(n[i]);n[i]=""}}},uploadAvatar:function(e,t){var n=jax.call("community","photos,ajaxUploadAvatar",e,t);cWindowShow(n,"",450,100)},ajaxUpload:function(e,t,n){var r=joms.jQuery("#jsform-uploadavatar").prop("action");joms.jQuery.ajaxFileUpload({url:r,secureuri:!1,fileElementId:"filedata",dataType:"json",beforeSend:function(){},complete:function(){},success:function(i,s){if(i.error=="true"){joms.jQuery("span.error").remove();joms.jQuery("#avatar-upload").prepend('<span class="error">'+i.msg+"</span>");return!1}r=i.msg;joms.jQuery("span.error").remove();var o=joms.jQuery("#cWindowContent").height(),u="",a="";joms.jQuery("#thumb-crop").css("min-height",0);joms.jQuery("#large-avatar-pic").prop("src",r);joms.jQuery("#thumb-hold  >img").prop("src",r);joms.jQuery("div.status-anchor img").prop("src",r);joms.jQuery("#large-avatar-pic").load(function(){var e=joms.jQuery("#cWindowContent").height();if(o>e)var t="-="+(o-e);else if(o<e)var t="+="+(e-o);joms.jQuery("#cwin_ml , #cwin_mr, #cWindowContentOuter, #cWindowContentWrap").animate({height:t});joms.photos.ajaxImgSelect();delete o;delete e;delete t});switch(e){case"event":u=joms.jQuery(".cPageAvatar img").prop("src");joms.jQuery(".cPageAvatar img").prop("src",r);if(u.search("assets/event.png")>-1)if(n){selected=joms.jQuery("input:radio[name=repeattype]:checked").val();custom='{"call":["CEvents","getEventRepeatSaveHTML","'+selected+'"], "library":"events", "arg":["repeattype"]}';jax.call("community","photos,ajaxUploadAvatar",e,t,custom)}else jax.call("community","photos,ajaxUploadAvatar",e,t);break;case"group":u=joms.jQuery(".cPageAvatar img").prop("src");joms.jQuery(".cPageAvatar img").prop("src",r);u.search("assets/group.png")>-1&&jax.call("community","photos,ajaxUploadAvatar",e,t);break;case"profile":u=joms.jQuery(".cPageAvatar img").prop("src");joms.jQuery(".cPageAvatar img").prop("src",r);if(i.info.length!=0){var f=i.info;joms.jQuery(".status-author > img").prop("src",f);joms.jQuery('.cStream-Avatar img[data-author="'+t+'"]').prop("src",f)}u.search("assets/user.png")>-1&&jax.call("community","photos,ajaxUploadAvatar",e,t)}}});return!1},ajaxImgSelect:function(){var e=document.getElementById("large-avatar-pic"),t=joms.jQuery(e).height(),n=160;t<160&&(n=t);t>160&&(t=160);joms.jQuery("#large-avatar-pic").imgAreaSelect({maxWidth:160,maxHeight:160,handles:!0,aspectRatio:"1:1",x1:0,y1:0,x2:n,y2:t,show:!1,hide:!0,enable:!1,parent:"#cWindow",minHeight:64,minWidth:64,onInit:joms.photos.previewThumb,onSelectChange:joms.photos.previewThumb});var r=joms.jQuery("#large-avatar-pic").imgAreaSelect({instance:!0});r.setOptions({show:!0,hide:!1,enable:!0});r.update()},saveThumb:function(e,t){var n=joms.jQuery("#large-avatar-pic").imgAreaSelect({instance:!0}),r=n.getSelection();jax.call("community","photos,ajaxUpdateThumbnail",e,t,r.x1,r.y1,r.width,r.height)},previewThumb:function(e,t){var n=64/(t.width||1),r=64/(t.height||1);joms.jQuery("#thumb-hold  >img").css({width:Math.round(n*160)+"px",height:Math.round(r*this.height)+"px",marginLeft:"-"+Math.round(n*t.x1)+"px",marginTop:"-"+Math.round(r*t.y1)+"px"})},ajaxRemoveImgSelect:function(){joms.jQuery(".imgareaselect-selection").parent().remove();joms.jQuery(".imgareaselect-outer").remove()},photoSlider:{moveSpace:4,partialOpacity:.6,fullOpacity:1,intervalTime:30,timer:"",controlObj:"",event:"",parentElem:"",stopAnimeId:"",img_thumbId:"photoSlider_thumb",img_thumbClass:"currentView",thumbnail:{width:0,height:0},_init:function(e,t,n){n!=undefined&&joms.photos.photoSlider.updateConfig(n);var r=joms.jQuery("#"+e);joms.photos.photoSlider.controlObj=r;joms.photos.photoSlider.parentElem=joms.jQuery(r.parent());if(t!=undefined&&t!=""){joms.photos.photoSlider.stopAnimeId=t;joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).css("opacity",joms.photos.photoSlider.partialOpacity);var i=joms.gallery.getPlaylistIndex(joms.gallery.currentPhoto().id);joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).eq(i).css("opacity",joms.photos.photoSlider.fullOpacity)}joms.photos.photoSlider.parentElem.bind({mouseover:function(e){var t=joms.photos.photoSlider.getValue(joms.jQuery(this).css("width")),n=joms.photos.photoSlider.getValue(joms.jQuery(this).css("height")),r=joms.jQuery(this).offset();e.pageY>r.top+n*.1&&e.pageY<r.top+n*.9&&joms.photos.photoSlider.moveContent(e)},mousemove:function(e){joms.photos.photoSlider.updateMousePos(e)},mouseout:function(e){joms.photos.photoSlider.reset(e)}});var s=joms.photos.photoSlider.parentElem.parent().width();joms.jQuery(".photo_slider").css("width",s+"px");joms.photos.photoSlider.switchPhoto()},updateConfig:function(e){var t=["moveSpace","partialOpacity","fullOpacity","intervalTime"];if(typeof e=="object")for(var n=0;n<t.length;n++)e[t[n]]!=undefined&&parseInt(e[t[n]])!="NaN"&&e[t[n]]>0&&(joms.photos.photoSlider[t[n]]=e[t[n]])},moveContent:function(e){joms.photos.photoSlider.parentElem.unbind("mouseover");joms.photos.photoSlider.timer=setInterval("joms.photos.photoSlider.animate()",joms.photos.photoSlider.intervalTime);if(joms.photos.photoSlider.stopAnimeId!=""&&joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).length>0){var t=joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).eq(0);joms.photos.photoSlider.thumbnail.width=joms.photos.photoSlider.getValue(t.css("width"));joms.photos.photoSlider.thumbnail.height=joms.photos.photoSlider.getValue(t.css("height"))}},animate:function(){if(joms.jQuery("#startTagMode").length>0&&joms.jQuery("#startTagMode").css("display")=="none"){joms.photos.photoSlider.stop();return!1}var e=joms.photos.photoSlider.getValue(joms.photos.photoSlider.controlObj.css("left")),t=joms.photos.photoSlider.getValue(joms.photos.photoSlider.controlObj.css("width")),n=joms.photos.photoSlider.getValue(joms.photos.photoSlider.parentElem.css("width")),r=n/2;joms.photos.photoSlider.getMouseXPosition()>r?e+t-n>=0&&joms.photos.photoSlider.controlObj.css("left",e-joms.photos.photoSlider.moveSpace+"px"):e<0&&joms.photos.photoSlider.controlObj.css("left",e+joms.photos.photoSlider.moveSpace+"px")},updateMousePos:function(e){joms.photos.photoSlider.event=e},getMouseXPosition:function(){return joms.photos.photoSlider.event.pageX-joms.photos.photoSlider.parentElem.offset().left},getMouseYPosition:function(){return joms.photos.photoSlider.event.pageY-joms.photos.photoSlider.parentElem.offset().top},getValue:function(e){if(e==""||e=="auto")intVal=0;else{intVal=parseInt(e.replace("px",""));if(typeof intVal!="number"||intVal=="NaN")intVal=0}return intVal},viewImage:function(e){if(joms.jQuery("#startTagMode").length>0&&joms.jQuery("#startTagMode").css("display")=="none")return!1;if(joms.gallery!=undefined&&jsPlaylist!=undefined){joms.photos.photoSlider.stop();joms.gallery.displayPhoto(jsPlaylist.photos[joms.gallery.getPlaylistIndex(e)]);joms.photos.photoSlider.switchPhoto()}},switchPhoto:function(){if(joms.photos.photoSlider.controlObj==undefined||joms.photos.photoSlider.controlObj=="")return!1;var e=document.location.href;t=decodeURI((RegExp("photoid=(.+?)(&|$)").exec(e)||[,null])[1]);if(t=="")var t=joms.photos.photoSlider.controlObj.find(img).eq(0).attr("id");joms.photos.photoSlider.controlObj.find("img").removeClass(joms.photos.photoSlider.img_thumbClass);joms.photos.photoSlider.controlObj.find('img[id="'+t+'"]').addClass(joms.photos.photoSlider.img_thumbClass);joms.jQuery(".image_thumb").css("opacity",joms.photos.photoSlider.partialOpacity);joms.jQuery("img#photoSlider_thumb"+t).css("opacity",joms.photos.photoSlider.fullOpacity)},updateThumb:function(e,t){var n='img[id="'+joms.photos.photoSlider.img_thumbId+e+'"]';joms.jQuery(".slider-gallery").find(n).length==1&&joms.jQuery(".slider-gallery").find(n).attr("src",t)},removeThumb:function(e){joms.jQuery("#cPhoto"+e).remove();var t=joms.photos.photoSlider.controlObj.find("img").length,n=79;joms.photos.photoSlider.controlObj.css("width",t*n+"px")},reset:function(e){var t=joms.photos.photoSlider.parentElem.offset();if(e.pageX>t.left&&e.pageX<t.left+joms.photos.photoSlider.getValue(joms.photos.photoSlider.parentElem.css("width"))&&e.pageY>t.top&&e.pageY<t.top+joms.photos.photoSlider.getValue(joms.photos.photoSlider.parentElem.css("height")))return!1;joms.photos.photoSlider.stop()},stop:function(){clearInterval(joms.photos.photoSlider.timer);joms.photos.photoSlider.timer="";joms.photos.photoSlider.event="";joms.photos.photoSlider.parentElem.unbind("mouseover").unbind("mousemove").unbind("mouseout");joms.photos.photoSlider._init(joms.photos.photoSlider.controlObj.attr("id"),joms.photos.photoSlider.stopAnimeId)}}},tooltips:{currentJaxCall:"",currentJElement:"",currentTimeout:"",minitipStyle:{top:0,left:0,width:500,height:100},showDialog:function(e){if(joms.tooltips.currentJElement==""||joms.tooltips.currentJaxCall==""){joms.tooltips.currentTimeout!=""&&clearTimeout(joms.tooltips.currentTimeout);return!1}if(joms.tooltips.currentJElement.hasClass(e)){joms.minitip._init(joms.tooltips.currentJaxCall,"",joms.tooltips.minitipStyle.width,joms.tooltips.minitipStyle.height);joms.tooltips.repositionMinitip();joms.jQuery("#"+joms.minitip.id.canvas).addClass(e);joms.jQuery("#"+joms.minitip.id.canvas).attr("currentMinitip",joms.tooltips.currentJElement.attr("id"))}},addMinitipContent:function(e){if(joms.jQuery("#"+joms.minitip.id.canvas).length>0){joms.tooltips.repositionMinitip();joms.minitip.addContent(e)}},repositionMinitip:function(){var e=joms.tooltips.currentJElement.offset().top-(joms.jQuery("#"+joms.minitip.id.canvas).height()+20);if(joms.jQuery.browser.msie&&joms.jQuery.browser.version.substr(0,1)<=7)var t=joms.tooltips.currentJElement.offset().left-65;else var t=joms.tooltips.currentJElement.offset().left+30;joms.jQuery("#"+joms.minitip.id.canvas).css({top:e,left:t})},setDelay:function(e,t,n,r,i,s){e.attr("id")==undefined&&e.attr("id","temp_minitooltip"+Math.random().toString());if(joms.jQuery("#"+joms.minitip.id.canvas).length>0&&e.attr("id")==joms.jQuery("#"+joms.minitip.id.canvas).attr("currentMinitip"))return!1;r!=undefined&&parseInt(r)>0&&(joms.tooltips.minitipStyle.width=r);i!=undefined&&parseInt(i)>0&&(joms.tooltips.minitipStyle.height=i);joms.tooltips.currentJElement=e;joms.tooltips.currentJElement.bind("mouseout",function(){joms.jQuery(this).removeClass(n);clearTimeout(joms.tooltips.currentTimeout);joms.tooltips.reset();joms.minitip.hide()});joms.tooltips.currentJElement.addClass(n);joms.tooltips.currentJaxCall=t;joms.tooltips.currentTimeout=setTimeout("joms.tooltips.showDialog('"+n+"')",500)},reset:function(){joms.tooltips.currentJaxCall="";joms.tooltips.currentTimeout=""}},friends:{saveTag:function(){var e=jax.getFormValues("tagsForm");jax.call("community","friends,ajaxFriendTagSave",e);return!1},saveGroup:function(e){document.getElementById("newtag").value==""?window.alert("TPL_DB_INVALIDTAG"):jax.call("community","friends,ajaxAddGroup",e,joms.jQuery("#newtag").val())},cancelRequest:function(e){var t='jax.call("community" , "friends,ajaxCancelRequest" , "'+e+'");';cWindowShow(t,"",450,100)},connect:function(e){var t='jax.call("community", "friends,ajaxConnect", '+e+")";cWindowShow(t,"",450,100)},addNow:function(){var e=jax.getFormValues("addfriend");jax.call("community","friends,ajaxSaveFriend",e);return!1},confirmFriendRemoval:function(e){var t=function(){jax.call("community","friends,ajaxConfirmFriendRemoval",e)};cWindowShow(t,"",450,80,"warning")},remove:function(e){var t=joms.jQuery("#cWindow input[name=block]").attr("checked"),n;t?n=function(){jax.call("community","friends,ajaxBlockFriend",e)}:n=function(){jax.call("community","friends,ajaxRemoveFriend",e)};cWindowShow(n,"",450,80,"warning")},updateFriendList:function(e,t){currentFriends="";noFriend="";joms.jQuery("#community-invitation-list").hasClass("load-more")?currentFriends=joms.jQuery("#community-invitation-list").html():joms.jQuery.trim(e)==""&&(noFriend=t);newFriends=currentFriends+e+noFriend;joms.jQuery("#community-invitation-list").html(newFriends);joms.invitation.filterMember();joms.jQuery(".cTabNav #ctab-result").click()},loadFriend:function(e,t,n,r,i){joms.jQuery("#community-invitation-list").hasClass("load-more")&&joms.jQuery("#community-invitation-list").removeClass("load-more");jax.call("community","system,ajaxLoadFriendsList",e,t,n,r,i)},loadMoreFriend:function(e,t,n,r){name=joms.jQuery("#friend-search-filter").val();joms.jQuery("#community-invitation-list").addClass("load-more");jax.call("community","system,ajaxLoadFriendsList",name,e,t,n,r)},showForm:function(e,t,n,r,i){var s='jax.call("community", "system,ajaxShowFriendsForm","'+e+'","'+t+'","'+n+'","'+r+'","'+i+'")',o=520;o=r!="0"?o:o-108;o-=108;cWindowShow(s,"",550,o)},selectRecipients:function(){joms.jQuery("#community-invited-list li").each(function(e){var t=joms.jQuery(this).attr("id");if(!(joms.jQuery("#inbox-selected-to #"+t).length>0)){var n=joms.jQuery(this).clone();n.appendTo("#inbox-selected-to")}});joms.jQuery(".invitation-check label").empty();cWindowHide()}},messaging:{loadComposeWindow:function(e){var t='jax.call("community", "inbox,ajaxCompose", '+e+")";cWindowShow(t,"",450,100)},sendCompleted:function(){joms_message_sending=!1},send:function(){if(joms_message_sending)return!1;joms_message_sending=!0;var e=jax.getFormValues("writeMessageForm");jax.call("community","inbox,ajaxSend",e);return!1},confirmDeleteMarked:function(e){var t='jax.call("community", "inbox,ajaxDeleteMessages", "'+e+'")';cWindowShow(t,"",450,100)},deleteMarked:function(e){var t=new Array;joms.jQuery("#inbox-listing INPUT[type='checkbox']").each(function(){joms.jQuery(this).attr("checked")&&t.push(joms.jQuery(this).attr("value"))});e=="inbox"?jax.call("community","inbox,ajaxRemoveFullMessages",t.toString()):jax.call("community","inbox,ajaxRemoveSentMessages",t.toString());return!1}},walls:{insertOrder:"prepend",add:function(e,t){jax.loadingFunction=function(){joms.jQuery("#wall-message,#wall-submit").attr("disabled",!0)};jax.doneLoadingFunction=function(){joms.jQuery("#wall-message,#wall-submit").attr("disabled",!1)};typeof getCacheId=="function"?cache_id=getCacheId():cache_id="";jax.call("community",t,joms.jQuery("#wall-message").val(),e,cache_id)},insert:function(e){joms.jQuery("#wall-message").val("");joms.walls.insertOrder=="prepend"?joms.jQuery("#wall-containter").prepend(e):joms.jQuery("#wall-containter .wallComments:last").after(e)},remove:function(e,t,n){if(confirm("Are you sure you want to delete this wall?")){jax.call("community",e+",ajaxRemoveWall",t,n);joms.jQuery("#wall_"+t).fadeOut("normal",function(){joms.jQuery(this).remove()})}},update:function(e,t){cWindowHide();joms.jQuery("#wall_"+e).replaceWith(t)},save:function(e,t){jax.call("community","system,ajaxUpdateWall",e,joms.jQuery("#wall-edit-"+e).val(),t)},edit:function(e,t){if(joms.jQuery("#wall-edit-"+e).val()!=null){joms.jQuery("#wall-message-"+e).show();joms.jQuery("#wall-edit-container-"+e).children().remove()}else{joms.jQuery("#wall-message-"+e).hide();joms.jQuery("#wall_"+e+" div.content").prepend('<span id="wall-edit-container-'+e+'"></span>').prepend('<div class="loading" style="display:block;float: left;"></div>');jax.call("community","system,ajaxEditWall",e,t);joms.utils.textAreaWidth("#wall-edit-"+e);joms.utils.autogrow("#wall-edit-"+e)}},more:function(){var e=joms.jQuery("#wall-groupId").val(),t=joms.jQuery("#wall-discussionId").val(),n=joms.jQuery("#wall-limitStart").val();joms.jQuery("#wall-more .more-wall-text").hide();joms.jQuery("#wall-more .loading").show();jax.call("community","system,ajaxGetOlderWalls",e,t,n)},append:function(e){joms.jQuery("#wall-more,#wall-groupId,#wall-discussionId,#wall-limitStart").remove();joms.jQuery("#wall-containter").append(e)},prepend:function(e){joms.jQuery("#wall-more").remove();joms.jQuery("#wall-groupId").remove();joms.jQuery("#wall-discussionId").remove();joms.jQuery("#wall-limitStart").remove();joms.jQuery("#wall-containter").prepend(e)},showVideoWindow:function(e){var t='jax.call("community" , "videos,ajaxShowVideoWindow", "'+e+'");';cWindowShow(t,"",640,360)}},toolbar:{timeout:500,closetimer:0,ddmenuitem:0,open:function(e){if(joms.jQuery("#"+e).length>0){joms.toolbar.cancelclosetime();joms.toolbar.ddmenuitem&&(joms.toolbar.ddmenuitem.style.visibility="hidden");joms.toolbar.ddmenuitem=document.getElementById(e);joms.toolbar.ddmenuitem.style.visibility="visible"}},close:function(){joms.toolbar.ddmenuitem&&(joms.toolbar.ddmenuitem.style.visibility="hidden")},closetime:function(){joms.toolbar.closetimer=window.setTimeout(joms.toolbar.close,joms.toolbar.timeout)},cancelclosetime:function(){if(joms.toolbar.closetimer){window.clearTimeout(joms.toolbar.closetimer);joms.toolbar.closetimer=null}}},registrations:{showTermsWindow:function(e){var t='jax.call("community", "register,ajaxShowTnc", "'+e+'")';cWindowShow(t,this.windowTitle,600,350)},authenticate:function(){jax.call("community","register,ajaxGenerateAuthKey")},authenticateAssign:function(){jax.call("community","register,ajaxAssignAuthKey")},assignAuthKey:function(fname,lblname,authkey){eval("document.forms['"+fname+"'].elements['"+lblname+"'].value = '"+authkey+"';")},showWarning:function(e,t){cWindowShow("joms.jQuery('#cWindowContent').html('"+e+"')",t,450,200,"warning")}},miniwall:{initialize:function(){joms.jQuery("[data-commentid]").live({mouseover:function(){joms.jQuery(this).find("[href=#removeComment]").show()},mouseout:function(){joms.jQuery(this).find("[href=#removeComment]").hide()}});joms.jQuery('a[href="#removeComment"]').live("click",function(){var e=joms.jQuery(this).parents("[data-commentid]").data("commentid");joms.miniwall.remove(e)});joms.jQuery('a[href="#showallcomments"]').live("click",function(){var e=joms.jQuery(this).parents("li.stream").data("streamid");jax.call("community","system,ajaxStreamShowComments",e)});joms.jQuery(".cStream-Form textarea").width(joms.jQuery(".cStream-Form").width()-12)},add:function(e){var t=joms.jQuery("#wall-cmt-"+e+" textarea").val();t=joms.jQuery.trim(t);if(t.length>0){joms.jQuery("#wall-cmt-"+e+" .wall-coc-form-action.add").attr("disabled",!0);joms.jQuery("#wall-cmt-"+e+" .wall-coc-errors").hide();jax.loadingFunction=function(){joms.jQuery("#wall-cmt-"+e+" textarea").attr("disabled",!0);joms.jQuery("#wall-cmt-"+e+" .wall-coc-form-actions").append('<em class="wall-cmt-loading">Posting...</em>');jax.loadingFunction=function(){}};jax.doneLoadingFunction=function(){joms.jQuery("#wall-cmt-"+e+" .wall-coc-form-actions").find("em").remove();joms.jQuery("#wall-cmt-"+e+" textarea").attr("disabled",!1).val("");joms.jQuery("#wall-cmt-"+e+" .wall-coc-form-action.add").attr("disabled",!1);cmtCountObj=joms.jQuery("#wall-cmt-"+e).parent().parent().find(".wall-cmt-count");curCmtCount=parseInt(cmtCountObj.html());cmtCountObj.parent().fadeOut("fast",function(){cmtCountObj.html(curCmtCount+1);cmtCountObj.parent().fadeIn("fast")});jax.doneLoadingFunction=function(){}};jax.call("community","system,ajaxStreamAddComment",e,t)}},insert:function(e,t){joms.jQuery("#wall-cmt-"+e+" .wallform").before(t);joms.jQuery("#wall-cmt-"+e+" .wallnone").removeClass("wallnone");joms.miniwall.cancel(e)},loadall:function(e,t){joms.jQuery("li[data-streamid="+e+"] div[data-commentid]").remove();joms.jQuery("li[data-streamid="+e+"] div[data-commentmore]").replaceWith(t)},cancel:function(e){joms.jQuery("#wall-cmt-"+e+" textarea").val("");joms.jQuery("#wall-cmt-"+e+" .wall-coc-errors").hide();joms.jQuery("#wall-cmt-"+e+" .wall-coc-form-action.add").removeAttr("disabled");joms.jQuery("#wall-cmt-"+e+" [data-formblock]").hide();joms.jQuery("li[data-streamid="+e+"] [data-commentid]").length>0&&joms.jQuery("li[data-streamid="+e+"] [data-replyblock]").show()},remove:function(e){var t=joms.jQuery("#wall-"+e).parent().parent().parent().find(".wall-cmt-count");jax.loadingFunction=function(){joms.jQuery("#wall-"+e).css({backgroundColor:"#ffdddd"}).find(".wall-coc-remove-link").show().html('<em class="wall-cmt-loading wall-cmt-loading-inline">Removing...</em>');jax.loadingFunction=function(){}};jax.doneLoadingFunction=function(){var n=parseInt(t.html());if(n>0){n==1&&joms.jQuery("#wall-"+e).parent().parent().find(".cComment:last").addClass("wallnone");t.parent().fadeOut("fast",function(){t.html(n-1);t.parent().fadeIn("fast")})}joms.jQuery("[data-commentid="+e+"]").fadeOut("fast",function(){joms.jQuery(this).remove()}).find(".wall-coc-remove-link").hide();jax.doneLoadingFunction=function(){}};jax.call("community","system,ajaxStreamRemoveComment",e)},show:function(e){var t=joms.jQuery("#"+e+" form").parent().width();joms.jQuery("li[data-streamid="+e+"] [data-formblock]").show();joms.jQuery("li[data-streamid="+e+"] [data-formblock] form").width(t);joms.jQuery("li[data-streamid="+e+"] [data-replyblock]").hide();var n=joms.jQuery("li[data-streamid="+e+"] .cStream-Form").find("textarea");if(!n.data("autogrow")){joms.utils.textAreaWidth(n);joms.utils.autogrow(n);n.focus();n.blur(function(){joms.jQuery(this).val()==""&&joms.miniwall.cancel(e)}).data("autogrow",!0)}}},comments:{add:function(e){var t=joms.jQuery("#"+e+" textarea").val();if(t!=""){joms.jQuery("#"+e+" .wall-coc-form-action.add").attr("disabled",!0);typeof getCacheId=="function"?cache_id=getCacheId():cache_id="";jax.call("community","plugins,walls,ajaxAddComment",e,t,cache_id)}},insert:function(e,t){joms.jQuery("#"+e+" form").before(t);joms.comments.cancel(e)},remove:function(e){var t=joms.jQuery(e).parents(".cComment"),n=joms.jQuery(t).index();try{console.log(n)}catch(r){}var i=joms.jQuery(e).parents(".cComment").parent().attr("id");try{console.log(i)}catch(r){}jax.call("community","plugins,walls,ajaxRemoveComment",i,n)},cancel:function(e){joms.jQuery("#"+e+" textarea").val("");joms.jQuery("#"+e+" textarea").height("auto");joms.jQuery("#"+e+" form").hide();joms.jQuery("#"+e+" .show-cmt").show();joms.jQuery("#"+e+" .wall-coc-errors").hide();joms.jQuery("#"+e+" .wall-coc-form-action.add").removeAttr("disabled")},show:function(e){var t=joms.jQuery("#"+e+" form").parent().width();joms.jQuery("#"+e+" .wall-coc-form-action.add").removeAttr("disabled");joms.jQuery("#"+e+" form").width(t).show();joms.jQuery("#"+e+" .show-cmt").hide();var n=joms.jQuery("#"+e+" textarea");if(!n.data("autogrow")){joms.utils.textAreaWidth(n);joms.utils.autogrow(n);n.blur(function(){joms.jQuery(this).val()==""&&joms.comments.cancel(e)}).data("autogrow",!0)}}},utils:{textAreaWidth:function(target){with(joms.jQuery(target)){css("width","100%");css("width",width()-parseInt(css("borderLeftWidth"))-parseInt(css("borderRightWidth"))-parseInt(css("padding-left"))-parseInt(css("padding-right")))}},autogrow:function(e,t){t==undefined&&(t={});t.maxHeight=t.maxHeight||300;joms.jQuery(e).autogrow(t)}},maps:{mapsObj:null,geocoder:null,init:function(){if(joms.jQuery(".cMapFade")!=null||joms.jQuery(".cMapHeatzone")!=null){joms.jQuery(".cMapFade").live("mouseover",function(e){joms.jQuery(this).find("img:eq(2)").fadeOut(0)});joms.jQuery(".cMapFade").live("mouseout",function(e){joms.jQuery(this).find("img:eq(2)").fadeIn(0)});joms.jQuery(".cMapHeatzone").live("mouseover",function(e){joms.jQuery(this).parent().find("img:eq(1)").fadeOut(0)});joms.jQuery(".cMapHeatzone").live("mouseout",function(e){joms.jQuery(this).parent().find("img:eq(1)").fadeIn(0)})}},initialize:function(e,t,n,r){if(typeof google.maps=="undefined")setTimeout("joms.maps.initialize('"+e+"', '"+t+"')",1e3);else{joms.maps.geocoder=new google.maps.Geocoder;joms.maps.geocoder.geocode({address:t},function(t,i){if(i==google.maps.GeocoderStatus.OK){joms.maps.mapsObj==null&&(joms.maps.mapsObj=new Array);var s=new google.maps.LatLng(-34.397,150.644),o={zoom:14,center:s,mapTypeId:google.maps.MapTypeId.ROADMAP},u=joms.maps.mapsObj.length;joms.maps.mapsObj[u]=new google.maps.Map(document.getElementById(e),o);joms.maps.mapsObj[u].setCenter(t[0].geometry.location);var a=new google.maps.Marker({map:joms.maps.mapsObj[u],position:t[0].geometry.location,title:n});if(r.length>0){var f=new google.maps.InfoWindow({content:r});google.maps.event.addListener(a,"click",function(){var t=joms.jQuery("div#"+e).data("maps");f.open(joms.maps.mapsObj[t],a)})}joms.jQuery("div#"+e).data("maps",u)}else alert("Geocode was not successful for the following reason: "+i)})}},addMarker:function(e,t,n,r,i){if(joms.maps.mapsObj==null)setTimeout("joms.maps.addMarker('"+e+"', "+t+", "+n+", '"+r+"', '"+i+"')",1e3);else{var s=joms.jQuery("div#"+e).data("maps"),o=new google.maps.LatLng(t,n),u=new google.maps.Marker({position:o,map:joms.maps.mapsObj[s],title:r});if(i.length>0){var a=new google.maps.InfoWindow({content:i});google.maps.event.addListener(u,"click",function(){var t=joms.jQuery("div#"+e).data("maps");a.open(joms.maps.mapsObj[t],u)})}}}},connect:{checkRealname:function(e){var t=jax.loadingFunction;jax.loadingFunction=function(){};jax.doneLoadingFunction=function(){jax.loadingFunction=t};jax.call("community","connect,ajaxCheckName",e)},checkEmail:function(e){var t=jax.loadingFunction;jax.loadingFunction=function(){};jax.doneLoadingFunction=function(){jax.loadingFunction=t};jax.call("community","connect,ajaxCheckEmail",e)},checkUsername:function(e){var t=jax.loadingFunction;jax.loadingFunction=function(){};jax.doneLoadingFunction=function(){jax.loadingFunction=t};jax.call("community","connect,ajaxCheckUsername",e)},update:function(){var e="jax.call('community', 'connect,ajaxUpdate' );";cWindowShow(e,"",450,200)},updateEmail:function(){joms.jQuery("#facebook-email-update").submit()},importData:function(){var e=joms.jQuery("#importstatus").is(":checked")?1:0,t=joms.jQuery("#importavatar").is(":checked")?1:0;jax.call("community","connect,ajaxImportData",e,t)},mergeNotice:function(){var e="jax.call('community','connect,ajaxMergeNotice');";cWindowShow(e,"",450,200)},merge:function(){var e="jax.call('community','connect,ajaxMerge');";cWindowShow(e,"",450,200)},validateUser:function(){var e="jax.call('community','connect,ajaxValidateLogin','"+joms.jQuery("#existingusername").val()+"','"+joms.jQuery("#existingpassword").val()+"');";cWindowShow(e,"",450,200)},newUser:function(){var e="jax.call('community','connect,ajaxShowNewUserForm');";cWindowShow(e,"",450,200)},existingUser:function(){var e="jax.call('community','connect,ajaxShowExistingUserForm');";cWindowShow(e,"",450,200)},selectType:function(){if(joms.jQuery("[name=membertype]:checked").val()=="1"){var e=joms.jQuery("#tnc:checked").val();if(joms.jQuery("#tnc:checked").length==0&&joms.jQuery("#tnc").length==1){joms.jQuery("span#err_msg").css("display","block");return!1}joms.connect.newUser()}else joms.connect.existingUser()},validateNewAccount:function(){jax.call("community","connect,ajaxCheckEmail",joms.jQuery("#newemail").val());jax.call("community","connect,ajaxCheckUsername",joms.jQuery("#newusername").val());jax.call("community","connect,ajaxCheckName",joms.jQuery("#newname").val());var e=!0;if(joms.jQuery("#newname").val()==""||joms.jQuery("#error-newname").css("display")!="none")e=!1;if(joms.jQuery("#newusername").val()==""||joms.jQuery("#error-newusername").css("display")!="none")e=!1;if(joms.jQuery("#newemail").val()==""||joms.jQuery("#error-newemail").css("display")!="none")e=!1;if(e){var t="";joms.jQuery(".jsProfileType").length>0&&joms.jQuery(".jsProfileType input").length>0&&(t=joms.jQuery(".jsProfileType input:checked").length>0?joms.jQuery(".jsProfileType input:checked").val():t);var n="jax.call('community', 'connect,ajaxCreateNewAccount' , '"+joms.jQuery("#newname").val()+"', '"+joms.jQuery("#newusername").val()+"','"+joms.jQuery("#newemail").val()+"','"+t+"');";cWindowShow(n,"",450,200)}}},videos:{playProfileVideo:function(e,t){var n="jax.call('community', 'profile,ajaxPlayProfileVideo', "+e+", "+t+")";cWindowShow(n,"",640,360)},linkConfirmProfileVideo:function(e){var t="jax.call('community', 'profile,ajaxConfirmLinkProfileVideo', '"+e+"');";cWindowShow(t,"",450,100)},linkProfileVideo:function(e){var t="jax.call('community', 'profile,ajaxLinkProfileVideo', '"+e+"');";cWindowShow(t,"",450,100)},removeConfirmProfileVideo:function(e,t){var n="jax.call('community', 'profile,ajaxRemoveConfirmLinkProfileVideo', '"+e+"', '"+t+"');";cWindowShow(n,"",450,100)},removeLinkProfileVideo:function(e,t){var n="jax.call('community', 'profile,ajaxRemoveLinkProfileVideo', '"+e+"', '"+t+"');";cWindowShow(n,"",450,100)},showEditWindow:function(e,t){typeof t=="undefined"&&(t="");var n="jax.call('community', 'videos,ajaxEditVideo', '"+e+"' , '"+t+"');";cWindowShow(n,"",450,400)},deleteVideo:function(e,t){var n="jax.call('community' , 'videos,ajaxRemoveVideo', '"+e+"','"+t+"');";cWindowShow(n,"",450,150)},playerConf:{},addVideo:function(e,t){if(typeof e=="undefined"||e=="")var e="",t="";var n="jax.call('community', 'videos,ajaxAddVideo', '"+e+"', '"+t+"');";cWindowShow(n,"",600,500)},linkVideo:function(e,t){var n="jax.call('community', 'videos,ajaxLinkVideo', '"+e+"', '"+t+"');";cWindowShow(n,"",450,100)},uploadVideo:function(e,t){var n="jax.call('community', 'videos,ajaxUploadVideo', '"+e+"', '"+t+"');";cWindowShow(n,"",450,100)},submitLinkVideo:function(){var e=!0;joms.jQuery("form#linkVideo li button").prop("disabled",!0);videoLinkUrl="#linkVideo input[name='videoLinkUrl']";if(joms.jQuery.trim(joms.jQuery(videoLinkUrl).val())==""){joms.jQuery(videoLinkUrl).addClass("invalid");e=!1}else joms.jQuery(videoLinkUrl).removeClass("invalid");if(e){joms.jQuery("#cwin-wait").css("margin-left","20px");joms.jQuery("#cwin-wait").show();document.linkVideo.submit()}},submitUploadVideo:function(){var e=!0;videoFile="#uploadVideo input[name='videoFile']";if(joms.jQuery.trim(joms.jQuery(videoFile).val())==""){joms.jQuery(videoFile).addClass("invalid");e=!1}else joms.jQuery(videoFile).removeClass("invalid");videoTitle="#uploadVideo input[name='title']";if(joms.jQuery.trim(joms.jQuery(videoTitle).val())==""){joms.jQuery(videoTitle).addClass("invalid");e=!1}else joms.jQuery(videoTitle).removeClass("invalid");if(e){joms.jQuery("#cwin-wait").css("margin-left","20px");joms.jQuery("#cwin-wait").show();document.uploadVideo.submit()}},fetchThumbnail:function(e){var t="jax.call('community' , 'videos,ajaxFetchThumbnail', '"+e+"','myvideos');";cWindowShow(t,"",450,150)},toggleSearchSubmenu:function(e){joms.jQuery(e).next("ul").toggle().find("input[type=text]").focus()},selectVideoTagFriends:function(e){joms.jQuery("#community-invited-list li").each(function(t){var n=joms.jQuery(this).attr("id");n=n.substr("invitation-friend-".length);jax.call("community","videos,ajaxAddVideoTag",e,n)});joms.jQuery(".invitation-check label").empty();cWindowHide()},addVideoTextTag:function(tags,textRemove){var videoTextTags=joms.jQuery(".videoTextTags");typeof tags=="string"&&(tags=eval("("+tags+")"));var singleTag=!1;if(!joms.jQuery.isArray(tags)){tags=[tags];singleTag=!0}joms.jQuery.each(tags,function(e,t){if(t.id==undefined)return;var n=joms.jQuery('<span class="videoTextTag"></span>');n.data("tag",t).attr("id","videoTextTag-"+t.id).appendTo(videoTextTags);var r=joms.jQuery("<a>");r.attr("href",t.profileUrl).html(t.displayName).prependTo(n);if(t.canRemove){var i=joms.jQuery('<span class="videoTextTagActions"></span>');i.appendTo(n);var s=joms.jQuery('<a class="videoTextTagAction" href="javascript: void(0);"></a>');s.addClass("_remove").html(textRemove).click(function(){joms.videos.removeVideoTag(t)}).appendTo(i);i.before(" ").prepend("(").append(")")}});joms.videos.commifyTextTags()},removeVideoTag:function(e){jax.call("community","videos,ajaxRemoveVideoTag",e.videoId,e.userId);e==undefined?joms.jQuery(".videoTextTags").remove():joms.jQuery("#videoTextTag-"+e.id).remove();joms.videos.commifyTextTags()},commifyTextTags:function(){joms.jQuery(".videoTextTags .comma").remove();videoTextTag=joms.jQuery(".videoTextTag");videoTextTag.each(function(e){if(e==0)return;var t=joms.jQuery('<span class="comma"></span>');t.html(", ").prependTo(this)})},checkSize:function(e){joms.jQuery("form#uploadVideo button").prop("disabled",!0);if(joms.jQuery.browser.msie)return!1
;Size=e.files[0].size;jax.call("community","videos,ajaxCheckFileSize",Size)}},users:{banUser:function(e,t){var n="jax.call('community', 'profile,ajaxBanUser', '"+e+"' , '"+t+"');";cWindowShow(n,"",450,100)},removePicture:function(e){var t="jax.call('community', 'profile,ajaxRemovePicture', '"+e+"');";cWindowShow(t,"",450,100)},updateURL:function(e){var t="jax.call('community', 'profile,ajaxUpdateURL', '"+e+"');";cWindowShow(t,"",450,100)},uploadNewPicture:function(e){var t="jax.call('community', 'profile,ajaxUploadNewPicture', '"+e+"');";cWindowShow(t,"",450,100)},blockUser:function(e){var t='jax.call("community", "profile,ajaxBlockUser", "'+e+'");';cWindowShow(t,"",450,100)},unBlockUser:function(e,t){t=t||null;var n='jax.call("community", "profile,ajaxUnblockUser", "'+e+'", "'+t+'");';cWindowShow(n,"",450,100)}},user:{getActive:function(){return js_profileId}},events:{deleteEvent:function(e){var t="jax.call('community', 'events,ajaxWarnEventDeletion', '"+e+"');";cWindowShow(t,"",450,100,"warning")},join:function(e){var t='jax.call("community", "events,ajaxRequestInvite", "'+e+'", location.href );';cWindowShow(t,"",450,100)},leave:function(e){var t='jax.call("community", "events,ajaxIgnoreEvent", "'+e+'");';cWindowShow(t,"",450,100)},sendmail:function(e){var t='jax.call("community", "events,ajaxSendEmail", "'+e+'");';cWindowShow(t,"",450,300)},confirmBlockGuest:function(e,t){var n='jax.call("community", "events,ajaxConfirmBlockGuest", "'+e+'", "'+t+'");';cWindowShow(n,"",450,100)},blockGuest:function(e,t){var n='jax.call("community", "events,ajaxBlockGuest", "'+e+'", "'+t+'");';cWindowShow(n,"",450,100)},confirmUnblockGuest:function(e,t){var n='jax.call("community", "events,ajaxConfirmUnblockGuest", "'+e+'", "'+t+'");';cWindowShow(n,"",450,100)},unblockGuest:function(e,t){var n='jax.call("community", "events,ajaxUnblockGuest", "'+e+'", "'+t+'");';cWindowShow(n,"",450,100)},confirmRemoveGuest:function(e,t){var n='jax.call("community", "events,ajaxConfirmRemoveGuest", "'+e+'", "'+t+'");';cWindowShow(n,"",450,80,"warning")},removeGuest:function(e,t){var n=joms.jQuery("#cWindow input[name=block]").attr("checked"),r="";n?r='jax.call("community", "events,ajaxBlockGuest", "'+e+'", "'+t+'");':r='jax.call("community", "events,ajaxRemoveGuest", "'+e+'", "'+t+'");';cWindowShow(r,"",450,100,"warning")},joinNow:function(e){jax.call("community","events,ajaxJoinInvitation",e)},rejectNow:function(e){jax.call("community","events,ajaxRejectInvitation",e)},toggleSearchSubmenu:function(e){joms.jQuery(e).next("ul").toggle().find("input[type=text]").focus()},displayNearbyEvents:function(e){joms.ajax.call("events,ajaxDisplayNearbyEvents",[e],{success:function(e){joms.jQuery("#community-event-nearby-listing").html(e)}})},getDayEvent:function(e,t,n,r){jax.loadingFunction=function(){joms.jQuery(".loading-icon").show()};jax.doneLoadingFunction=function(){joms.jQuery(".loading-icon").hide()};jax.cacheCall("community","events,ajaxGetEvents",e,t,n,r)},displayDayEvent:function(response){joms.jQuery(".events-list").html("");var day_event=eval("("+response+")");day_event.length>0?joms.jQuery("strong.happening_title").show():joms.jQuery("strong.happening_title").hide();for(var i=0;i<day_event.length;i++){var start_day=day_event[i].start,end_day=day_event[i].end;joms.jQuery(".events-list").html(joms.jQuery(".events-list").html()+'<li><a class="date_day_'+start_day+"_"+end_day+'" href="'+day_event[i].link+'"> '+day_event[i].title+"</a></li>");joms.jQuery('a[class^="date_day_"]').mouseenter(function(){var e=joms.jQuery(this).attr("class").split("_"),t=e[2],n=parseInt(e[3])+1;for(var r=t;r<n;r++)joms.jQuery(".event_date_"+r).addClass("highlightrunning")});joms.jQuery('a[class^="date_day_"]').mouseleave(function(){joms.jQuery(".highlightrunning").removeClass("highlightrunning")});i+1!=day_event.length&&joms.jQuery(".events-list").html(joms.jQuery(".events-list").html())}},getCalendar:function(e,t){jax.cacheCall("community","events,ajaxGetCalendar",e,t)},displayCalendar:function(e){joms.jQuery("div#event").html(e);init_calendar()},switchImport:function(e){if(e=="file"){joms.jQuery("#event-import-url").css("display","none");joms.jQuery("#event-import-file").css("display","block");joms.jQuery("#import-type").val("file")}if(e=="url"){joms.jQuery("#event-import-file").css("display","none");joms.jQuery("#event-import-url").css("display","block");joms.jQuery("#import-type").val("url")}},showMapWindow:function(){var e='jax.call("community", "events,ajaxShowMap");';cWindowShow(e,"",450,100)},showDesc:function(){joms.jQuery("#event-discription").show();joms.jQuery("#event-description-link").hide()},submitRSVP:function(e,t){rsvpres=t.value;joms.ajax.call("events,ajaxUpdateStatus",[e,rsvpres],{success:function(e){joms.jQuery("#community-event-members").replaceWith(e);var n=joms.jQuery(t.children[rsvpres-1]).prop("class");joms.jQuery(t.parentNode.children[0]).prop("class",null);joms.jQuery(t.parentNode.children[0]).addClass(n)}})},save:function(){var e="jax.call('community', 'events,ajaxShowRepeatOption');";cWindowShow(e,"",450,100)},uploadAvatar:function(e,t,n){var r=null;n&&(r='{"call":["CEvents","getEventRepeatSaveHTML"], "library":"events", "arg":{"radio":"repeattype"}}');var i=jax.call("community","photos,ajaxUploadAvatar",e,t,r);cWindowShow(i,"",450,100)}},profile:{confirmRemoveAvatar:function(){var e='jax.call("community", "profile,ajaxConfirmRemoveAvatar");';cWindowShow(e,"",450,100)},setStatusLimit:function(e){joms.jQuery(e).keyup(function(){var e=parseInt(joms.jQuery(this).attr("maxlength"));joms.jQuery(this).val().length>e&&joms.jQuery(this).val(joms.jQuery(this).val().substr(0,joms.jQuery(this).attr("maxlength")));joms.jQuery("#profile-status-notice span").html(e-joms.jQuery(this).val().length)})}},privacy:{init:function(){joms.jQuery("select.js_PrivacySelect").each(function(){var e="",t;joms.jQuery(this).find("option").each(function(){joms.jQuery(this).attr("selected")&&(t=joms.jQuery(this).val())});e+="<dl class='js_dropDownMaster'>\n";e+="<dt name="+t+" class='js_dropDown js_dropSelect-"+t+"'><strong>"+joms.jQuery(this).find('option[selected="selected"]').text()+"</strong><span></span></dt>\n";e+="<dd>\n<ul class='js_dropDownParent'>\n";joms.jQuery(this).find("option").each(function(){var n=joms.jQuery(this).val();n==t?e+="<li class='js_dropDownCurrent'>":e+="<li>";e+="<a href='javascript:void()' name='"+n+"' class='js_dropDownChild js_dropDown-"+n+"'>"+joms.jQuery(this).text()+"</a></li>\n"});e+="</ul>\n</dd>\n</dl>";joms.jQuery(this).parent().prepend(e);joms.jQuery(this).hide()});joms.jQuery(".js_dropDownChild").die("click touchstart");joms.jQuery(".js_dropDownChild").live("click touchstart",function(e){e.preventDefault();var t=joms.jQuery(this).attr("name"),n="";joms.jQuery(this).closest(".js_PriContainer").find("option").each(function(){if(joms.jQuery(this).val()==t){joms.jQuery(this).attr("selected","selected");n=joms.jQuery(this).text()}else joms.jQuery(this).attr("selected",!1)});var r=joms.jQuery(this).parent().parent().parent().parent().find("dt"),i=r.attr("name");r.removeClass("js_dropSelect-"+i).addClass("js_dropSelect-"+t).attr("name",t).html("<strong>"+n+"</strong><span></span>");joms.privacy.closeAll()});joms.jQuery(".js_dropDownMaster dt").die("click touchstart");joms.jQuery(".js_dropDownMaster dt").live("click touchstart",function(e){e.preventDefault();if(joms.jQuery(this).parent().data("state")){joms.privacy.closeAll();joms.jQuery("body").unbind("click")}else{joms.privacy.closeAll();joms.jQuery(this).parent().parent().addClass("js_PrivacyOpen");joms.jQuery(this).parent().data("state",1).addClass("js_Current").find("dd").show();joms.jQuery("body").bind("click",function(e){var t=joms.jQuery(e.target);t.parents(".js_PriContainer").length==0&&joms.privacy.closeAll()})}})},closeAll:function(){joms.jQuery(".js_PriContainer").removeClass("js_PrivacyOpen");joms.jQuery(".js_dropDownMaster").each(function(){joms.jQuery(this).data("state",0).removeClass("js_Current").find("dd").hide()})}},tooltip:{setup:function(){joms.jQuery(".jomNameTips").tipsy({live:!0,gravity:"sw"});joms.jQuery(".qtip-active").hide();setTimeout("joms.jQuery('.qtip-active').hide()",150);try{clearTimeout(joms.jQuery.fn.qtip.timers.show)}catch(e){}joms.jQuery(".jomTips").each(function(){var e="tipNormal",t=220,n={corner:{target:"topMiddle",tooltip:"bottomMiddle"}},r=!0,i={when:{event:"mouseout"},effect:{length:10}};if(joms.jQuery(this).hasClass("tipRight")){e="tipRight";t=320;n={corner:{target:"rightMiddle",tooltip:"leftMiddle"}}}joms.jQuery(this).hasClass("tipWide")&&(t=420);joms.jQuery(this).hasClass("tipFullWidth")&&(t=joms.jQuery(this).innerWidth()-20);var s="",o=joms.jQuery(this).attr("title"),u="";o&&(u=o.split("::"));joms.jQuery(this).attr("title","");if(u.length==2){o=u[1];s={text:u[0]}}else s=s={text:""};joms.jQuery(this).qtip({content:{text:o,title:s},style:{name:e,width:t},position:n,hide:i,show:{solo:!0,effect:{length:50}}}).removeClass("jomTips")});return!0},setStyle:function(){joms.jQuery.fn.qtip.styles.tipNormal={width:320,border:{width:7,radius:5},tip:!0,name:"dark"};joms.jQuery.fn.qtip.styles.tipRight={tip:"leftMiddle",name:"tipNormal"};return!0}},like:{init:function(){joms.jQuery('a[href="#like"]').live("click",function(){var e=joms.jQuery(this).parents("li.stream").data("streamid");jax.call("community","system,ajaxStreamAddLike",e)});joms.jQuery('a[href="#unlike"]').live("click",function(){var e=joms.jQuery(this).parents("li.stream").data("streamid");jax.call("community","system,ajaxStreamUnlike",e)})},extractData:function(e){e=e.split("-");var t=[];t.element=e[1];t.itemid=e[2];t.element=t.element.replace("_",".");return t},like:function(e){var t=joms.jQuery(e).parents(".like-snippet"),n=this.extractData(t.attr("id"));joms.jQuery(e).attr("onclick","");joms.ajax.call("system,ajaxLike",[n.element,n.itemid],{success:function(e){t.replaceWith(e)}})},dislike:function(e){var t=joms.jQuery(e).parents(".like-snippet"),n=this.extractData(t.attr("id"));joms.jQuery(e).attr("onclick","");joms.ajax.call("system,ajaxDislike",[n.element,n.itemid],{success:function(e){t.replaceWith(e)}})},unlike:function(e){var t=joms.jQuery(e).parents(".like-snippet"),n=this.extractData(t.attr("id"));joms.jQuery(e).attr("onclick","");joms.ajax.call("system,ajaxUnlike",[n.element,n.itemid],{success:function(e){t.replaceWith(e)}})}},tag:{add:function(e,t){jax.call("community","system,ajaxAddTag",e,t,joms.jQuery("#tag-addbox").val())},pick:function(e,t,n){jax.call("community","system,ajaxAddTag",e,t,n)},remove:function(e){jax.call("community","system,ajaxRemoveTag",e)},moreHide:function(e,t){joms.jQuery("#tag-list li").each(function(e,t){e>8&&joms.jQuery(t).hide()});joms.jQuery(".more-tag-show").show();joms.jQuery(".more-tag-hide").hide()},moreShow:function(e,t){joms.jQuery("#tag-list li").each(function(e,t){e>8&&joms.jQuery(t).show()});joms.jQuery(".more-tag-show").hide();joms.jQuery(".more-tag-hide").show()},toggleMore:function(e,t){joms.jQuery("#tag-list li").each(function(e,t){e>8&&joms.jQuery(t).toggle()})},list:function(e){var t="jax.call('community', 'system,ajaxShowTagged', '"+e+"');";cWindowShow(t,"",450,100)},edit:function(e,t){joms.tag.moreShow(e,t);var n=e+"-"+t;joms.jQuery("#tag-editor.tag-editor-"+n+",.tag-token a.tag-delete").show()},done:function(e,t){joms.tag.moreHide(e,t);var n=e+"-"+t;joms.jQuery("#tag-editor.tag-editor-"+n+",.tag-token a.tag-delete").hide()}},geolocation:{showNearByEvents:function(e){joms.jQuery("#community-event-nearby-listing").show();joms.jQuery("#showNearByEventsLoading").show();if(typeof e=="undefined")if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,n=e.coords.longitude;geocoder=new google.maps.Geocoder;var r=new google.maps.LatLng(t,n);geocoder.geocode({latLng:r},function(t,n){if(n==google.maps.GeocoderStatus.OK){if(t[4]){e=t[4].formatted_address;joms.geolocation.setCookie("currentLocation",e);joms.events.displayNearbyEvents(e)}}else alert("Geocoder failed due to: "+n)})});else{alert("Sorry, your browser does not support this feature.");joms.jQuery("#community-event-nearby-listing").hide();joms.jQuery("#showNearByEventsLoading").hide()}else joms.events.displayNearbyEvents(e)},validateNearByEventsForm:function(){var e=joms.jQuery("#userInputLocation").val();e.length!=0&&joms.geolocation.showNearByEvents(e)},setCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+36e5);document.cookie=e+"="+escape(t)+";expires="+n},getCookie:function(e){if(document.cookie.length>0){c_start=document.cookie.indexOf(e+"=");if(c_start!=-1){c_start=c_start+e.length+1;c_end=document.cookie.indexOf(";",c_start);c_end==-1&&(c_end=document.cookie.length);return unescape(document.cookie.substring(c_start,c_end))}}return""}},file:{showFileUpload:function(e,t){var n='jax.call("community", "files,ajaxFileUploadForm","'+e+'",'+t+")";cWindowShow(n,"",600,400)},enableEditName:function(){if(joms.jQuery(".plupload_file_name span").length>0){joms.jQuery(".plupload_file_name span").unbind("click");joms.jQuery(".plupload_file_name span").bind("click",function(e){joms.file.editName(e)})}},editName:function(e){joms.jQuery(".plupload_file_name span").unbind("click");var t=e.target?e.target:e.which,n=joms.jQuery(t).parent().parent().attr("id"),r='<input type="text" target="'+n+'" name="filename" value="'+joms.jQuery(t).html()+'" />';joms.jQuery(t).html(r);joms.jQuery(t).find("input").unbind("keypress").unbind("focusout");joms.jQuery(t).find("input").bind("keypress",function(e){keyCode=e.keyCode;if(keyCode==13){joms.file.saveName(this,joms.jQuery(this).parent());joms.jQuery(".plupload_file_name span").bind("click",function(e){joms.file.editName(e)})}});joms.jQuery(t).find("input").bind("focusout",function(){joms.file.saveName(this,joms.jQuery(this).parent());joms.jQuery(".plupload_file_name span").bind("click",function(e){joms.file.editName(e)})})},saveName:function(e,t){var n=joms.jQuery(e).attr("target"),r=joms.jQuery("#html5_uploader").pluploadQueue().getFile(parseInt(n)),i=joms.jQuery(e).val();r.name=i;var s=encodeURIComponent(i);jax.call("community","files,ajaxSaveName",r.id,s);joms.jQuery(t).html(i)},ajaxDeleteFile:function(e,t){jax.call("community","files,ajaxDeleteFile",e,t)},ajaxUploadFile:function(e,t,n){var r=!1;joms.jQuery("#html5_uploader").pluploadQueue({runtimes:"html5,html4",url:e,max_file_size:n+"mb",chunk_size:n+"mb",unique_names:!0,filters:[{title:"Media files",extensions:t}],preinit:{FileUploaded:function(e,t,n){try{var r=joms.jQuery.parseJSON(n.response)}catch(i){joms.jQuery("#html5_uploader").pluploadQueue().stop()}var s=joms.jQuery("#html5_uploader").pluploadQueue().getFile(t.id);s.id=r.id;if(typeof r.msg!="undefined"){joms.jQuery("#html5_uploader").pluploadQueue().stop();joms.jQuery("#cWindowContent").prepend("<strong>"+r.msg+" </strong>")}},UploadComplete:function(e){setTimeout("joms.file.enableEditName();",1e3);r=!0;joms.jQuery("#upload-footer").show();cWindowAutoResize();joms.jQuery("a.add-more").click(function(){joms.jQuery("#html5_uploader").pluploadQueue().splice();joms.jQuery(".plupload_buttons").show();joms.jQuery(".plupload_file_status").hide();joms.jQuery("div#upload-footer").hide()})}}});joms.jQuery(".plupload_header").remove();joms.jQuery("span.plupload_upload_status").remove();joms.jQuery("input:file").parent().css("top","265px");joms.jQuery("#cwin_close_btn").click(function(){r&&window.location.reload()})},viewFile:function(e,t){var n='jax.call("community", "files,ajaxviewFiles","'+e+'","'+t+'")';cWindowShow(n,"",600,400)},ajaxdownloadFile:function(e,t){var n='jax.call("community","files,ajaxFileDownload","'+e+'","'+t+'")';cWindowShow(n,"",600,200)},getFileList:function(e,t,n,r,i){joms.jQuery("#load-more-btn").html("");jax.call("community","files,ajaxgetFileList",e,t,n,r,i)},updateFileList:function(e,t){currentFiles=joms.jQuery("#"+t).html();newFiles=currentFiles+e;joms.jQuery("#"+t).html(newFiles)},viewMore:function(e,t){var n='jax.call("community","files,ajaxviewMore","'+e+'","'+t+'")';cWindowShow(n,"",600,200)},loadFile:function(e,t,n,r,i){joms.jQuery("#load-more-btn").html("");jax.call("community","files,ajaxgetFileList",e,t,n,r,i)},searchFileUpdate:function(e,t){joms.jQuery(joms.jQuery("ul.cTabNav li.active").children().attr("href")).html(e)}}});joms.jQuery(document).click(function(){joms.toolbar.close()});joms.jQuery(document).ready(function(){joms.tooltip.setStyle();joms.tooltip.setup();joms.apps.initToggle();joms.plugins.initialize();joms.jQuery(".cStreamList li").length&&joms.miniwall.initialize();var e=window.location;joms.maps.init();joms.like.init();var t=0;joms.jQuery(".cTabsBar li").each(function(){joms.jQuery(this).attr("id","cTab-"+t).children("a").click(function(){if(joms.jQuery(this).parent("li").hasClass("cTabDisabled")){joms.jQuery(this).blur();return}joms.jQuery(".cTabsBar li").removeClass("cTabCurrent");joms.jQuery(joms.jQuery(this).parents().find("li#cTab-0")).hasClass("cTabDisabled")||joms.jQuery(".cTabsContent").removeClass("cTabsContentCurrent").trigger("onAfterHide");var e=joms.jQuery(this).parent("li").index();joms.jQuery("#cTab-"+e).addClass("cTabCurrent");joms.jQuery("#cTabContent-"+e).addClass("cTabsContentCurrent").trigger("onAfterShow")});joms.jQuery(".cTabsContentWrap .cTabsContent:eq("+t+")").attr("id","cTabContent-"+t);joms.jQuery(this).hasClass("cTabCurrent")&&joms.jQuery(".cTabsContentWrap .cTabsContent:eq("+t+")").data("status",1);t++})});joms.jQuery.cookie=function(e,t,n){if(typeof t=="undefined"){var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=joms.jQuery.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}return a}n=n||{};if(t===null){t="";n.expires=-1}var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;if(typeof n.expires=="number"){i=new Date;i.setTime(i.getTime()+n.expires*24*60*60*1e3)}else i=n.expires;r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"",o=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")};(function(e){e.fn.autogrow=function(t){var t=t||{};this.filter("textarea").each(function(){function s(){r.val(n.val());r[0].scrollHeight;var e=r[0].scrollHeight;if(e>t.maxHeight&&t.maxHeight>0){e=t.maxHeight;n.css("overflow","auto")}else{e=e<t.minHeight?t.minHeight:e;n.css("overflow","hidden")}n.height(e)}var n=e(this);if(n.hasClass("shadow"))return;var r=n.data("shadow"),i=n.outerHeight()-n.innerHeight();if(!r){r=n.clone().unbind().removeAttr("name").addClass("shadow").css({position:"absolute",visibility:"hidden",height:0}).insertAfter(n);t.lineHeight==undefined&&(t.lineHeight=r.val(" ")[0].scrollHeight);n.data("shadow",r).bind("focus blur keyup keypress autogrow",s)}t.minHeight==undefined&&(t.minHeight=n.height());t.maxHeight==undefined&&(t.maxHeight=0);s()});return this}})(joms.jQuery);(function(e){function t(t,n,r){var i=this;i.id=r;i.options=n;i.status={animated:!1,rendered:!1,disabled:!1,focused:!1};i.elements={target:t.addClass(i.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};i.cache={mouse:{},position:{},toggle:0};i.timers={};e.extend(i,i.options.api,{show:function(t){function s(){i.options.position.type!=="static"&&i.focus();i.onShow.call(i,t);e.browser.msie&&i.elements.tooltip.get(0).style.removeAttribute("filter")}var n,r;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");if(i.elements.tooltip.css("display")!=="none")return i;i.elements.tooltip.stop(!0,!1);n=i.beforeShow.call(i,t);if(n===!1)return i;i.cache.toggle=1;i.options.position.type!=="static"&&i.updatePosition(t,i.options.show.effect.length>0);typeof i.options.show.solo=="object"?r=e(i.options.show.solo):i.options.show.solo===!0&&(r=e("div.qtip").not(i.elements.tooltip));r&&r.each(function(){e(this).qtip("api").status.rendered===!0&&e(this).qtip("api").hide()});if(typeof i.options.show.effect.type=="function"){i.options.show.effect.type.call(i.elements.tooltip,i.options.show.effect.length);i.elements.tooltip.queue(function(){s();e(this).dequeue()})}else{switch(i.options.show.effect.type.toLowerCase()){case"fade":i.elements.tooltip.fadeIn(i.options.show.effect.length,s);break;case"slide":i.elements.tooltip.slideDown(i.options.show.effect.length,function(){s();i.options.position.type!=="static"&&i.updatePosition(t,!0)});break;case"grow":i.elements.tooltip.show(i.options.show.effect.length,s);break;default:i.elements.tooltip.show(null,s)}i.elements.tooltip.addClass(i.options.style.classes.active)}return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(t){function r(){i.onHide.call(i,t)}var n;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");if(i.elements.tooltip.css("display")==="none")return i;clearTimeout(i.timers.show);i.elements.tooltip.stop(!0,!1);n=i.beforeHide.call(i,t);if(n===!1)return i;i.cache.toggle=0;if(typeof i.options.hide.effect.type=="function"){i.options.hide.effect.type.call(i.elements.tooltip,i.options.hide.effect.length);i.elements.tooltip.queue(function(){r();e(this).dequeue()})}else{switch(i.options.hide.effect.type.toLowerCase()){case"fade":i.elements.tooltip.fadeOut(i.options.hide.effect.length,r);break;case"slide":i.elements.tooltip.slideUp(i.options.hide.effect.length,r);break;case"grow":i.elements.tooltip.hide(i.options.hide.effect.length,r);break;default:i.elements.tooltip.hide(null,r)}i.elements.tooltip.removeClass(i.options.style.classes.active)}return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(t,n){var r,s,o,u,a,f,l,h,p,d,v,m,y,b;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");if(i.options.position.type=="static")return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");s={position:{left:0,top:0},dimensions:{height:0,width:0},corner:i.options.position.corner.target};o={position:i.getPosition(),dimensions:i.getDimensions(),corner:i.options.position.corner.tooltip};if(i.options.position.target!=="mouse"){if(i.options.position.target.get(0).nodeName.toLowerCase()=="area"){u=i.options.position.target.attr("coords").split(",");for(r=0;r<u.length;r++)u[r]=parseInt(u[r]);a=i.options.position.target.parent("map").attr("name");f=e('img[usemap="#'+a+'"]:first').offset();s.position={left:Math.floor(f.left+u[0]),top:Math.floor(f.top+u[1])};switch(i.options.position.target.attr("shape").toLowerCase()){case"rect":s.dimensions={width:Math.ceil(Math.abs(u[2]-u[0])),height:Math.ceil(Math.abs(u[3]-u[1]))};break;case"circle":s.dimensions={width:u[2]+1,height:u[2]+1};break;case"poly":s.dimensions={width:u[0],height:u[1]};for(r=0;r<u.length;r++)if(r%2==0){u[r]>s.dimensions.width&&(s.dimensions.width=u[r]);u[r]<u[0]&&(s.position.left=Math.floor(f.left+u[r]))}else{u[r]>s.dimensions.height&&(s.dimensions.height=u[r]);u[r]<u[1]&&(s.position.top=Math.floor(f.top+u[r]))}s.dimensions.width=s.dimensions.width-(s.position.left-f.left);s.dimensions.height=s.dimensions.height-(s.position.top-f.top);break;default:return e.fn.qtip.log.error.call(i,4,e.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition")}s.dimensions.width-=2;s.dimensions.height-=2}else if(i.options.position.target.add(document.body).length===1){s.position={left:e(document).scrollLeft(),top:e(document).scrollTop()};s.dimensions={height:e(window).height(),width:e(window).width()}}else{typeof i.options.position.target.attr("qtip")!="undefined"?s.position=i.options.position.target.qtip("api").cache.position:s.position=i.options.position.target.offset();s.dimensions={height:i.options.position.target.outerHeight(),width:i.options.position.target.outerWidth()}}l=e.extend({},s.position);s.corner.search(/right/i)!==-1&&(l.left+=s.dimensions.width);s.corner.search(/bottom/i)!==-1&&(l.top+=s.dimensions.height);s.corner.search(/((top|bottom)Middle)|center/)!==-1&&(l.left+=s.dimensions.width/2);s.corner.search(/((left|right)Middle)|center/)!==-1&&(l.top+=s.dimensions.height/2)}else{s.position=l={left:i.cache.mouse.x,top:i.cache.mouse.y};s.dimensions={height:1,width:1}}o.corner.search(/right/i)!==-1&&(l.left-=o.dimensions.width);o.corner.search(/bottom/i)!==-1&&(l.top-=o.dimensions.height);o.corner.search(/((top|bottom)Middle)|center/)!==-1&&(l.left-=o.dimensions.width/2);o.corner.search(/((left|right)Middle)|center/)!==-1&&(l.top-=o.dimensions.height/2);h=e.browser.msie?1:0;p=e.browser.msie&&parseInt(e.browser.version.charAt(0))===6?1:0;if(i.options.style.border.radius>0){o.corner.search(/Left/)!==-1?l.left-=i.options.style.border.radius:o.corner.search(/Right/)!==-1&&(l.left+=i.options.style.border.radius);o.corner.search(/Top/)!==-1?l.top-=i.options.style.border.radius:o.corner.search(/Bottom/)!==-1&&(l.top+=i.options.style.border.radius)}if(h){o.corner.search(/top/)!==-1?l.top-=h:o.corner.search(/bottom/)!==-1&&(l.top+=h);o.corner.search(/left/)!==-1?l.left-=h:o.corner.search(/right/)!==-1&&(l.left+=h);o.corner.search(/leftMiddle|rightMiddle/)!==-1&&(l.top-=1)}i.options.position.adjust.screen===!0&&(l=c.call(i,l,s,o));if(i.options.position.target==="mouse"&&i.options.position.adjust.mouse===!0){i.options.position.adjust.screen===!0&&i.elements.tip?v=i.elements.tip.attr("rel"):v=i.options.position.corner.tooltip;l.left+=v.search(/right/i)!==-1?-6:6;l.top+=v.search(/bottom/i)!==-1?-6:6}!i.elements.bgiframe&&e.browser.msie&&parseInt(e.browser.version.charAt(0))==6&&e("select, object").each(function(){m=e(this).offset();m.bottom=m.top+e(this).height();m.right=m.left+e(this).width();l.top+o.dimensions.height>=m.top&&l.left+o.dimensions.width>=m.left&&g.call(i)});l.left+=i.options.position.adjust.x;l.top+=i.options.position.adjust.y;y=i.getPosition();if(l.left!=y.left||l.top!=y.top){b=i.beforePositionUpdate.call(i,t);if(b===!1)return i;i.cache.position=l;if(n===!0){i.status.animated=!0;i.elements.tooltip.animate(l,200,"swing",function(){i.status.animated=!1})}else i.elements.tooltip.css(l);i.onPositionUpdate.call(i,t);typeof t!="undefined"&&t.type&&t.type!=="mousemove"&&e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}return i},updateWidth:function(t){var n;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth");if(t&&typeof t!="number")return e.fn.qtip.log.error.call(i,2,"newWidth must be of type number","updateWidth");n=i.elements.contentWrapper.siblings().add(i.elements.tip).add(i.elements.button);if(!t)if(typeof i.options.style.width.value=="number")t=i.options.style.width.value;else{i.elements.tooltip.css({width:"auto"});n.hide();e.browser.msie&&i.elements.wrapper.add(i.elements.contentWrapper.children()).css({zoom:"normal"});t=i.getDimensions().width+1;if(!i.options.style.width.value){t>i.options.style.width.max&&(t=i.options.style.width.max);t<i.options.style.width.min&&(t=i.options.style.width.min)}}t%2!==0&&(t-=1);i.elements.tooltip.width(t);n.show();i.options.style.border.radius&&i.elements.tooltip.find(".qtip-betweenCorners").each(function(n){e(this).width(t-i.options.style.border.radius*2)});if(e.browser.msie){i.elements.wrapper.add(i.elements.contentWrapper.children()).css({zoom:"1"});i.elements.wrapper.width(t);i.elements.bgiframe&&i.elements.bgiframe.width(t).height(i.getDimensions.height)}return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")},updateStyle:function(t){var n,r,o,a,f;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle");if(typeof t!="string"||!e.fn.qtip.styles[t])return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle");i.options.style=d.call(i,e.fn.qtip.styles[t],i.options.user.style);i.elements.content.css(h(i.options.style));i.options.content.title.text!==!1&&i.elements.title.css(h(i.options.style.title,!0));i.elements.contentWrapper.css({borderColor:i.options.style.border.color});if(i.options.style.tip.corner!==!1)if(e("<canvas>").get(0).getContext){n=i.elements.tooltip.find(".qtip-tip canvas:first");o=n.get(0).getContext("2d");o.clearRect(0,0,300,300);a=n.parent("div[rel]:first").attr("rel");f=v(a,i.options.style.tip.size.width,i.options.style.tip.size.height);u.call(i,n,f,i.options.style.tip.color||i.options.style.border.color)}else if(e.browser.msie){n=i.elements.tooltip.find('.qtip-tip [nodeName="shape"]');n.attr("fillcolor",i.options.style.tip.color||i.options.style.border.color)}if(i.options.style.border.radius>0){i.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:i.options.style.border.color});if(e("<canvas>").get(0).getContext){r=m(i.options.style.border.radius);i.elements.tooltip.find(".qtip-wrapper canvas").each(function(){o=e(this).get(0).getContext("2d");o.clearRect(0,0,300,300);a=e(this).parent("div[rel]:first").attr("rel");s.call(i,e(this),r[a],i.options.style.border.radius,i.options.style.border.color)})}else e.browser.msie&&i.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){e(this).attr("fillcolor",i.options.style.border.color)})}return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")},updateContent:function(t,n){function u(){i.updateWidth();if(n!==!1){i.options.position.type!=="static"&&i.updatePosition(i.elements.tooltip.is(":visible"),!0);i.options.style.tip.corner!==!1&&a.call(i)}}var r,s,o;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");if(!t)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");r=i.beforeContentUpdate.call(i,t);if(typeof r=="string")t=r;else if(r===!1)return;e.browser.msie&&i.elements.contentWrapper.children().css({zoom:"normal"});t.jquery&&t.length>0?t.clone(!0).appendTo(i.elements.content).show():i.elements.content.html(t);s=i.elements.content.find("img[complete=false]");if(s.length>0){o=0;s.each(function(t){e('<img src="'+e(this).attr("src")+'" />').load(function(){++o==s.length&&u()})})}else u();i.onContentUpdate.call(i);return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(t,n,r){function o(t){i.onContentLoad.call(i);e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent");i.updateContent(t)}var s;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent");s=i.beforeContentLoad.call(i);if(s===!1)return i;r=="post"?e.post(t,n,o):e.get(t,n,o);return i},updateTitle:function(t){if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle");if(!t)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle");returned=i.beforeTitleUpdate.call(i);if(returned===!1)return i;i.elements.button&&(i.elements.button=i.elements.button.clone(!0));i.elements.title.html(t);i.elements.button&&i.elements.title.prepend(i.elements.button);i.onTitleUpdate.call(i);return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle")},focus:function(t){var n,r,s,o;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");if(i.options.position.type=="static")return e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");n=parseInt(i.elements.tooltip.css("z-index"));r=6e3+e("div.qtip[qtip]").length-1;if(!i.status.focused&&n!==r){o=i.beforeFocus.call(i,t);if(o===!1)return i;e("div.qtip[qtip]").not(i.elements.tooltip).each(function(){if(e(this).qtip("api").status.rendered===!0){s=parseInt(e(this).css("z-index"));typeof s=="number"&&s>-1&&e(this).css({zIndex:parseInt(e(this).css("z-index"))-1});e(this).qtip("api").status.focused=!1}});i.elements.tooltip.css({zIndex:r});i.status.focused=!0;i.onFocus.call(i,t);e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_FOCUSED,"focus")}return i},disable:function(t){if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable");if(t)if(!i.status.disabled){i.status.disabled=!0;e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_DISABLED,"disable")}else e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable");else if(i.status.disabled){i.status.disabled=!1;e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_ENABLED,"disable")}else e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable");return i},destroy:function(){var t,n,r;n=i.beforeDestroy
.call(i);if(n===!1)return i;if(i.status.rendered){i.options.show.when.target.unbind("mousemove.qtip",i.updatePosition);i.options.show.when.target.unbind("mouseout.qtip",i.hide);i.options.show.when.target.unbind(i.options.show.when.event+".qtip");i.options.hide.when.target.unbind(i.options.hide.when.event+".qtip");i.elements.tooltip.unbind(i.options.hide.when.event+".qtip");i.elements.tooltip.unbind("mouseover.qtip",i.focus);i.elements.tooltip.remove()}else i.options.show.when.target.unbind(i.options.show.when.event+".qtip-create");if(typeof i.elements.target.data("qtip")=="object"){r=i.elements.target.data("qtip").interfaces;if(typeof r=="object"&&r.length>0)for(t=0;t<r.length-1;t++)r[t].id==i.id&&r.splice(t,1)}delete e.fn.qtip.interfaces[i.id];typeof r=="object"&&r.length>0?i.elements.target.data("qtip").current=r.length-1:i.elements.target.removeData("qtip");i.onDestroy.call(i);e.fn.qtip.log.error.call(i,1,e.fn.qtip.constants.EVENT_DESTROYED,"destroy");return i.elements.target},getPosition:function(){var t,n;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition");t=i.elements.tooltip.css("display")!=="none"?!1:!0;t&&i.elements.tooltip.css({visiblity:"hidden"}).show();n=i.elements.tooltip.offset();t&&i.elements.tooltip.css({visiblity:"visible"}).hide();return n},getDimensions:function(){var t,n;if(!i.status.rendered)return e.fn.qtip.log.error.call(i,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions");t=i.elements.tooltip.is(":visible")?!1:!0;t&&i.elements.tooltip.css({visiblity:"hidden"}).show();n={height:i.elements.tooltip.outerHeight(),width:i.elements.tooltip.outerWidth()};t&&i.elements.tooltip.css({visiblity:"visible"}).hide();return n}})}function n(){var t,n,i,s,u,a,c;t=this;t.beforeRender.call(t);t.status.rendered=!0;t.elements.tooltip='<div qtip="'+t.id+'" class="qtip '+(t.options.style.classes.tooltip||t.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+t.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+t.options.style.classes.content+'"></div></div></div></div>';t.elements.tooltip=e(t.elements.tooltip);t.elements.tooltip.appendTo(t.options.position.container);t.elements.tooltip.data("qtip",{current:0,interfaces:[t]});t.elements.wrapper=t.elements.tooltip.children("div:first");t.elements.contentWrapper=t.elements.wrapper.children("div:first").css({background:t.options.style.background});t.elements.content=t.elements.contentWrapper.children("div:first").css(h(t.options.style));e.browser.msie&&t.elements.wrapper.add(t.elements.content).css({zoom:1});t.options.hide.when.event=="unfocus"&&t.elements.tooltip.attr("unfocus",!0);typeof t.options.style.width.value=="number"&&t.updateWidth();if(e("<canvas>").get(0).getContext||e.browser.msie){t.options.style.border.radius>0?r.call(t):t.elements.contentWrapper.css({border:t.options.style.border.width+"px solid "+t.options.style.border.color});t.options.style.tip.corner!==!1&&o.call(t)}else{t.elements.contentWrapper.css({border:t.options.style.border.width+"px solid "+t.options.style.border.color});t.options.style.border.radius=0;t.options.style.tip.corner=!1;e.fn.qtip.log.error.call(t,2,e.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")}if(typeof t.options.content.text=="string"&&t.options.content.text.length>0||t.options.content.text.jquery&&t.options.content.text.length>0)i=t.options.content.text;else if(typeof t.elements.target.attr("title")=="string"&&t.elements.target.attr("title").length>0){i=t.elements.target.attr("title").replace("\\n","<br />");t.elements.target.attr("title","")}else if(typeof t.elements.target.attr("alt")=="string"&&t.elements.target.attr("alt").length>0){i=t.elements.target.attr("alt").replace("\\n","<br />");t.elements.target.attr("alt","")}else{i=" ";e.fn.qtip.log.error.call(t,1,e.fn.qtip.constants.NO_VALID_CONTENT,"render")}t.options.content.title.text!==!1&&f.call(t);t.updateContent(i);l.call(t);t.options.show.ready===!0&&t.show();if(t.options.content.url!==!1){s=t.options.content.url;u=t.options.content.data;a=t.options.content.method||"get";t.loadContent(s,u,a)}t.onRender.call(t);e.fn.qtip.log.error.call(t,1,e.fn.qtip.constants.EVENT_RENDERED,"render")}function r(){var t,n,r,i,o,u,a,f,l,c,h,p,d,v,g;t=this;t.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();r=t.options.style.border.width;i=t.options.style.border.radius;o=t.options.style.border.color||t.options.style.tip.color;u=m(i);a={};for(n in u){a[n]='<div rel="'+n+'" style="'+(n.search(/Left/)!==-1?"left":"right")+":0; position:absolute; height:"+i+"px; width:"+i+'px; overflow:hidden; line-height:0.1px; font-size:1px">';if(e("<canvas>").get(0).getContext)a[n]+='<canvas height="'+i+'" width="'+i+'" style="vertical-align: top"></canvas>';else if(e.browser.msie){f=i*2+3;a[n]+='<v:arc stroked="false" fillcolor="'+o+'" startangle="'+u[n][0]+'" endangle="'+u[n][1]+'" style="width:'+f+"px; height:"+f+"px; margin-top:"+(n.search(/bottom/)!==-1?-2:-1)+"px; margin-left:"+(n.search(/Right/)!==-1?u[n][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'}a[n]+="</div>"}l=t.getDimensions().width-Math.max(r,i)*2;c='<div class="qtip-betweenCorners" style="height:'+i+"px; width:"+l+"px; overflow:hidden; background-color:"+o+'; line-height:0.1px; font-size:1px;">';h='<div class="qtip-borderTop" dir="ltr" style="height:'+i+"px; margin-left:"+i+'px; line-height:0.1px; font-size:1px; padding:0;">'+a.topLeft+a.topRight+c;t.elements.wrapper.prepend(h);p='<div class="qtip-borderBottom" dir="ltr" style="height:'+i+"px; margin-left:"+i+'px; line-height:0.1px; font-size:1px; padding:0;">'+a.bottomLeft+a.bottomRight+c;t.elements.wrapper.append(p);e("<canvas>").get(0).getContext?t.elements.wrapper.find("canvas").each(function(){d=u[e(this).parent("[rel]:first").attr("rel")];s.call(t,e(this),d,i,o)}):e.browser.msie&&t.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>');v=Math.max(i,i+(r-i));g=Math.max(r-i,0);t.elements.contentWrapper.css({border:"0px solid "+o,borderWidth:g+"px "+v+"px"})}function s(e,t,n,r){var i=e.get(0).getContext("2d");i.fillStyle=r;i.beginPath();i.arc(t[0],t[1],n,0,Math.PI*2,!1);i.fill()}function o(t){var n,r,i,s,o;n=this;n.elements.tip!==null&&n.elements.tip.remove();r=n.options.style.tip.color||n.options.style.border.color;if(n.options.style.tip.corner===!1)return;t||(t=n.options.style.tip.corner);i=v(t,n.options.style.tip.size.width,n.options.style.tip.size.height);n.elements.tip='<div class="'+n.options.style.classes.tip+'" dir="ltr" rel="'+t+'" style="position:absolute; height:'+n.options.style.tip.size.height+"px; width:"+n.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">';if(e("<canvas>").get(0).getContext)n.elements.tip+='<canvas height="'+n.options.style.tip.size.height+'" width="'+n.options.style.tip.size.width+'"></canvas>';else if(e.browser.msie){s=n.options.style.tip.size.width+","+n.options.style.tip.size.height;o="m"+i[0][0]+","+i[0][1];o+=" l"+i[1][0]+","+i[1][1];o+=" "+i[2][0]+","+i[2][1];o+=" xe";n.elements.tip+='<v:shape fillcolor="'+r+'" stroked="false" filled="true" path="'+o+'" coordsize="'+s+'" style="width:'+n.options.style.tip.size.width+"px; height:"+n.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+(t.search(/top/)!==-1?"bottom":"top")+'"></v:shape>';n.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>';n.elements.contentWrapper.css("position","relative")}n.elements.tooltip.prepend(n.elements.tip+"</div>");n.elements.tip=n.elements.tooltip.find("."+n.options.style.classes.tip).eq(0);e("<canvas>").get(0).getContext&&u.call(n,n.elements.tip.find("canvas:first"),i,r);t.search(/top/)!==-1&&e.browser.msie&&parseInt(e.browser.version.charAt(0))===6&&n.elements.tip.css({marginTop:-4});a.call(n,t)}function u(e,t,n){var r=e.get(0).getContext("2d");r.fillStyle=n;r.beginPath();r.moveTo(t[0][0],t[0][1]);r.lineTo(t[1][0],t[1][1]);r.lineTo(t[2][0],t[2][1]);r.fill()}function a(t){var n,r,i,s,o;n=this;if(n.options.style.tip.corner===!1||!n.elements.tip)return;t||(t=n.elements.tip.attr("rel"));r=positionAdjust=e.browser.msie?1:0;n.elements.tip.css(t.match(/left|right|top|bottom/)[0],0);if(t.search(/top|bottom/)!==-1){e.browser.msie&&(parseInt(e.browser.version.charAt(0))===6?positionAdjust=t.search(/top/)!==-1?-3:1:positionAdjust=t.search(/top/)!==-1?1:2);t.search(/Middle/)!==-1?n.elements.tip.css({left:"50%",marginLeft:-(n.options.style.tip.size.width/2)}):t.search(/Left/)!==-1?n.elements.tip.css({left:n.options.style.border.radius-r}):t.search(/Right/)!==-1&&n.elements.tip.css({right:n.options.style.border.radius+r});t.search(/top/)!==-1?n.elements.tip.css({top:-positionAdjust}):n.elements.tip.css({bottom:positionAdjust})}else if(t.search(/left|right/)!==-1){e.browser.msie&&(positionAdjust=parseInt(e.browser.version.charAt(0))===6?1:t.search(/left/)!==-1?1:2);t.search(/Middle/)!==-1?n.elements.tip.css({top:"50%",marginTop:-(n.options.style.tip.size.height/2)}):t.search(/Top/)!==-1?n.elements.tip.css({top:n.options.style.border.radius-r}):t.search(/Bottom/)!==-1&&n.elements.tip.css({bottom:n.options.style.border.radius+r});t.search(/left/)!==-1?n.elements.tip.css({left:-positionAdjust}):n.elements.tip.css({right:positionAdjust})}i="padding-"+t.match(/left|right|top|bottom/)[0];s=n.options.style.tip.size[i.search(/left|right/)!==-1?"width":"height"];n.elements.tooltip.css("padding",0);n.elements.tooltip.css(i,s);if(e.browser.msie&&parseInt(e.browser.version.charAt(0))==6){o=parseInt(n.elements.tip.css("margin-top"))||0;o+=parseInt(n.elements.content.css("margin-top"))||0;n.elements.tip.css({marginTop:o})}}function f(){var t=this;t.elements.title!==null&&t.elements.title.remove();t.elements.title=e('<div class="'+t.options.style.classes.title+'">').css(h(t.options.style.title,!0)).css({zoom:e.browser.msie?1:0}).prependTo(t.elements.contentWrapper);t.options.content.title.text&&t.updateTitle.call(t,t.options.content.title.text);t.options.content.title.button!==!1&&typeof t.options.content.title.button=="string"&&(t.elements.button=e('<a class="'+t.options.style.classes.button+'" style="float:right; position: relative"></a>').css(h(t.options.style.button,!0)).html(t.options.content.title.button).prependTo(t.elements.title).click(function(e){t.status.disabled||t.hide(e)}))}function l(){function o(n){if(t.status.disabled===!0)return;if(t.options.hide.when.event=="inactive"){e(i).each(function(){r.bind(this+".qtip-inactive",s);t.elements.content.bind(this+".qtip-inactive",s)});s()}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.timers.show=setTimeout(function(){t.show(n)},t.options.show.delay)}function u(n){if(t.status.disabled===!0)return;if(t.options.hide.fixed===!0&&t.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&e(n.relatedTarget).parents("div.qtip[qtip]").length>0){n.stopPropagation();n.preventDefault();clearTimeout(t.timers.hide);return!1}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.elements.tooltip.stop(!0,!0);t.timers.hide=setTimeout(function(){t.hide(n)},t.options.hide.delay)}var t,n,r,i;t=this;n=t.options.show.when.target;r=t.options.hide.when.target;t.options.hide.fixed&&(r=r.add(t.elements.tooltip));if(t.options.hide.when.event=="inactive"){i=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseover","mouseleave","mouseover"];function s(n){if(t.status.disabled===!0)return;clearTimeout(t.timers.inactive);t.timers.inactive=setTimeout(function(){e(i).each(function(){r.unbind(this+".qtip-inactive");t.elements.content.unbind(this+".qtip-inactive")});t.hide(n)},t.options.hide.delay)}}else t.options.hide.fixed===!0&&t.elements.tooltip.bind("mouseover.qtip",function(){if(t.status.disabled===!0)return;clearTimeout(t.timers.hide)});if(t.options.show.when.target.add(t.options.hide.when.target).length===1&&t.options.show.when.event==t.options.hide.when.event&&t.options.hide.when.event!=="inactive"||t.options.hide.when.event=="unfocus"){t.cache.toggle=0;n.bind(t.options.show.when.event+".qtip",function(e){t.cache.toggle==0?o(e):u(e)})}else{n.bind(t.options.show.when.event+".qtip",o);t.options.hide.when.event!=="inactive"&&r.bind(t.options.hide.when.event+".qtip",u)}t.options.position.type.search(/(fixed|absolute)/)!==-1&&t.elements.tooltip.bind("mouseover.qtip",t.focus);t.options.position.target==="mouse"&&t.options.position.type!=="static"&&n.bind("mousemove.qtip",function(e){t.cache.mouse={x:e.pageX,y:e.pageY};t.status.disabled===!1&&t.options.position.adjust.mouse===!0&&t.options.position.type!=="static"&&t.elements.tooltip.css("display")!=="none"&&t.updatePosition(e)})}function c(t,n,r){var i,s,u,a,f,l;i=this;if(r.corner=="center")return n.position;s=e.extend({},t);a={x:!1,y:!1};f={left:s.left<e.fn.qtip.cache.screen.scroll.left,right:s.left+r.dimensions.width+2>=e.fn.qtip.cache.screen.width+e.fn.qtip.cache.screen.scroll.left,top:s.top<e.fn.qtip.cache.screen.scroll.top,bottom:s.top+r.dimensions.height+2>=e.fn.qtip.cache.screen.height+e.fn.qtip.cache.screen.scroll.top};u={left:f.left&&(r.corner.search(/right/i)!=-1||r.corner.search(/right/i)==-1&&!f.right),right:f.right&&(r.corner.search(/left/i)!=-1||r.corner.search(/left/i)==-1&&!f.left),top:f.top&&r.corner.search(/top/i)==-1,bottom:f.bottom&&r.corner.search(/bottom/i)==-1};if(u.left){i.options.position.target!=="mouse"?s.left=n.position.left+n.dimensions.width:s.left=i.cache.mouse.x;a.x="Left"}else if(u.right){i.options.position.target!=="mouse"?s.left=n.position.left-r.dimensions.width:s.left=i.cache.mouse.x-r.dimensions.width;a.x="Right"}if(u.top){i.options.position.target!=="mouse"?s.top=n.position.top+n.dimensions.height:s.top=i.cache.mouse.y;a.y="top"}else if(u.bottom){i.options.position.target!=="mouse"?s.top=n.position.top-r.dimensions.height:s.top=i.cache.mouse.y-r.dimensions.height;a.y="bottom"}if(s.left<0){s.left=t.left;a.x=!1}if(s.top<0){s.top=t.top;a.y=!1}if(i.options.style.tip.corner!==!1){s.corner=new String(r.corner);a.x!==!1&&(s.corner=s.corner.replace(/Left|Right|Middle/,a.x));a.y!==!1&&(s.corner=s.corner.replace(/top|bottom/,a.y));s.corner!==i.elements.tip.attr("rel")&&o.call(i,s.corner)}return s}function h(t,n){var r,i;r=e.extend(!0,{},t);for(i in r)n===!0&&i.search(/(tip|classes)/i)!==-1?delete r[i]:!n&&i.search(/(width|border|tip|title|classes|user)/i)!==-1&&delete r[i];return r}function p(e){typeof e.tip!="object"&&(e.tip={corner:e.tip});typeof e.tip.size!="object"&&(e.tip.size={width:e.tip.size,height:e.tip.size});typeof e.border!="object"&&(e.border={width:e.border});typeof e.width!="object"&&(e.width={value:e.width});typeof e.width.max=="string"&&(e.width.max=parseInt(e.width.max.replace(/([0-9]+)/i,"$1")));typeof e.width.min=="string"&&(e.width.min=parseInt(e.width.min.replace(/([0-9]+)/i,"$1")));if(typeof e.tip.size.x=="number"){e.tip.size.width=e.tip.size.x;delete e.tip.size.x}if(typeof e.tip.size.y=="number"){e.tip.size.height=e.tip.size.y;delete e.tip.size.y}return e}function d(){var t,n,r,i,s,o;t=this;r=[!0,{}];for(n=0;n<arguments.length;n++)r.push(arguments[n]);i=[e.extend.apply(e,r)];while(typeof i[0].name=="string")i.unshift(p(e.fn.qtip.styles[i[0].name]));i.unshift(!0,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},e.fn.qtip.styles.defaults);s=e.extend.apply(e,i);o=e.browser.msie?1:0;s.tip.size.width+=o;s.tip.size.height+=o;s.tip.size.width%2>0&&(s.tip.size.width+=1);s.tip.size.height%2>0&&(s.tip.size.height+=1);s.tip.corner===!0&&(s.tip.corner=t.options.position.corner.tooltip==="center"?!1:t.options.position.corner.tooltip);return s}function v(e,t,n){var r={bottomRight:[[0,0],[t,n],[t,0]],bottomLeft:[[0,0],[t,0],[0,n]],topRight:[[0,n],[t,0],[t,n]],topLeft:[[0,0],[0,n],[t,n]],topMiddle:[[0,n],[t/2,0],[t,n]],bottomMiddle:[[0,0],[t,0],[t/2,n]],rightMiddle:[[0,0],[t,n/2],[0,n]],leftMiddle:[[t,0],[t,n],[0,n/2]]};r.leftTop=r.bottomRight;r.rightTop=r.bottomLeft;r.leftBottom=r.topRight;r.rightBottom=r.topLeft;return r[e]}function m(t){var n;e("<canvas>").get(0).getContext?n={topLeft:[t,t],topRight:[0,t],bottomLeft:[t,0],bottomRight:[0,0]}:e.browser.msie&&(n={topLeft:[-90,90,0],topRight:[-90,90,-t],bottomLeft:[90,270,0],bottomRight:[90,270,-t]});return n}function g(){var e,t,n;e=this;n=e.getDimensions();t='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+n.height+"px; width:"+n.width+'px" />';e.elements.bgiframe=e.elements.wrapper.prepend(t).children(".qtip-bgiframe:first")}e.fn.qtip=function(r,i){var s,o,u,a,f,l,c,h;if(typeof r=="string"){typeof e(this).data("qtip")!="object"&&e.fn.qtip.log.error.call(self,1,e.fn.qtip.constants.NO_TOOLTIP_PRESENT,!1);if(r=="api")return e(this).data("qtip").interfaces[e(this).data("qtip").current];if(r=="interfaces")return e(this).data("qtip").interfaces}else{r||(r={});if(typeof r.content!="object"||r.content.jquery&&r.content.length>0)r.content={text:r.content};typeof r.content.title!="object"&&(r.content.title={text:r.content.title});typeof r.position!="object"&&(r.position={corner:r.position});typeof r.position.corner!="object"&&(r.position.corner={target:r.position.corner,tooltip:r.position.corner});typeof r.show!="object"&&(r.show={when:r.show});typeof r.show.when!="object"&&(r.show.when={event:r.show.when});typeof r.show.effect!="object"&&(r.show.effect={type:r.show.effect});typeof r.hide!="object"&&(r.hide={when:r.hide});typeof r.hide.when!="object"&&(r.hide.when={event:r.hide.when});typeof r.hide.effect!="object"&&(r.hide.effect={type:r.hide.effect});typeof r.style!="object"&&(r.style={name:r.style});r.style=p(r.style);a=e.extend(!0,{},e.fn.qtip.defaults,r);a.style=d.call({options:a},a.style);a.user=e.extend(!0,{},r)}return e(this).each(function(){if(typeof r=="string"){l=r.toLowerCase();u=e(this).qtip("interfaces");if(typeof u=="object")if(i===!0&&l=="destroy")while(u.length>0)u[u.length-1].destroy();else{i!==!0&&(u=[e(this).qtip("api")]);for(s=0;s<u.length;s++)l=="destroy"?u[s].destroy():u[s].status.rendered===!0&&(l=="show"?u[s].show():l=="hide"?u[s].hide():l=="focus"?u[s].focus():l=="disable"?u[s].disable(!0):l=="enable"&&u[s].disable(!1))}}else{c=e.extend(!0,{},a);c.hide.effect.length=a.hide.effect.length;c.show.effect.length=a.show.effect.length;c.position.container===!1&&(c.position.container=e(document.body));c.position.target===!1&&(c.position.target=e(this));c.show.when.target===!1&&(c.show.when.target=e(this));c.hide.when.target===!1&&(c.hide.when.target=e(this));o=e.fn.qtip.interfaces.length;for(s=0;s<o;s++)if(typeof e.fn.qtip.interfaces[s]=="undefined"){o=s;break}f=new t(e(this),c,o);e.fn.qtip.interfaces[o]=f;if(typeof e(this).data("qtip")=="object"){typeof e(this).attr("qtip")=="undefined"&&(e(this).data("qtip").current=e(this).data("qtip").interfaces.length);e(this).data("qtip").interfaces.push(f)}else e(this).data("qtip",{current:0,interfaces:[f]});if(c.content.prerender===!1&&c.show.when.event!==!1&&c.show.ready!==!0)c.show.when.target.bind(c.show.when.event+".qtip-"+o+"-create",{qtip:o},function(t){h=e.fn.qtip.interfaces[t.data.qtip];h.options.show.when.target.unbind(h.options.show.when.event+".qtip-"+t.data.qtip+"-create");h.cache.mouse={x:t.pageX,y:t.pageY};n.call(h);h.options.show.when.target.trigger(h.options.show.when.event)});else{f.cache.mouse={x:c.show.when.target.offset().left,y:c.show.when.target.offset().top};n.call(f)}}})};e(document).ready(function(){e.fn.qtip.cache={screen:{scroll:{left:e(window).scrollLeft(),top:e(window).scrollTop()},width:e(window).width(),height:e(window).height()}};var t;e(window).bind("scroll",function(n){clearTimeout(t);t=setTimeout(function(){if(n.type==="scroll")e.fn.qtip.cache.screen.scroll={left:e(window).scrollLeft(),top:e(window).scrollTop()};else{e.fn.qtip.cache.screen.width=e(window).width();e.fn.qtip.cache.screen.height=e(window).height()}for(i=0;i<e.fn.qtip.interfaces.length;i++){var t=e.fn.qtip.interfaces[i];t.status.rendered===!0&&(t.options.position.type!=="static"||t.options.position.adjust.scroll&&n.type==="scroll")&&t.updatePosition(n,!0)}},100)});e(document).bind("mousedown.qtip",function(t){e(t.target).parents("div.qtip").length===0&&e(".qtip[unfocus]").each(function(){var n=e(this).qtip("api");e(this).is(":visible")&&!n.status.disabled&&e(t.target).add(n.elements.target).length>1&&n.hide(t)})})});e.fn.qtip.interfaces=[];e.fn.qtip.log={error:function(){return this}};e.fn.qtip.constants={};e.fn.qtip.defaults={content:{prerender:!1,text:!1,url:!1,data:null,title:{text:!1,button:!1}},position:{target:!1,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:!0,screen:!1,scroll:!0},type:"absolute",container:!1},show:{when:{target:!1,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:!1,ready:!1},hide:{when:{target:!1,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:!1},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};e.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:!1,color:!1,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}})(joms.jQuery);(function(e){e.fn.stretchToFit=function(e){(function(t){t.css("width","100%");t.css("width",t.width()-parseInt(t.css("borderLeftWidth"))-parseInt(t.css("borderRightWidth"))-parseInt(t.css("padding-left"))-parseInt(t.css("padding-right")))})(this);return this}})(joms.jQuery);(function(e){e.fn.defaultValue=function(e,t){function r(){n.val()==e&&n.val("");n.removeClass(t)}function i(){var r=n.data("defaultText"),i=n.data("defaultClass"),s=n.val().length<1||n.val()==r||n.hasClass(i);s&&n.val(e);t!=i&&n.removeClass("_defaultClass");n.toggleClass(t,s)}var n=this;n.focus(r).blur(i);i();n.data("defaultText",e);n.data("defaultClass",t);return n}})(joms.jQuery);(function(e){e.fn.serializeJSON=function(){var t={};e.each(this.serializeArray(),function(){t[this.name]=this.value});return t}})(joms.jQuery);(function(e){e.fn.tipsy=function(t){t=e.extend({},e.fn.tipsy.defaults,t);return this.each(function(){var n=e.fn.tipsy.elementOptions(this,t);e(this).hover(function(){e.data(this,"cancel.tipsy",!0);var t=e.data(this,"active.tipsy");if(!t){t=e('<div class="tipsy"><div class="tipsy-inner"/></div>');t.css({position:"absolute",zIndex:1e5});e.data(this,"active.tipsy",t)}(e(this).attr("title")||typeof e(this).attr("original-title")!="string")&&e(this).attr("original-title",e(this).attr("title")||"").removeAttr("title");var r;typeof n.title=="string"?r=e(this).attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(r=n.title.call(this));t.find(".tipsy-inner")[n.html?"html":"text"](r||n.fallback);var i=e.extend({},e(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});t.get(0).className="tipsy";t.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var s=t[0].offsetWidth,o=t[0].offsetHeight,u=typeof n.gravity=="function"?n.gravity.call(this):n.gravity;switch(u.charAt(0)){case"n":t.css({top:i.top+i.height,left:i.left+i.width/2-s/2}).addClass("tipsy-north");break;case"s":t.css({top:i.top-o,left:i.left+i.width/2-s/2}).addClass("tipsy-south");break;case"e":t.css({top:i.top+i.height/2-o/2,left:i.left-s}).addClass("tipsy-east");break;case"w":t.css({top:i.top+i.height/2-o/2,left:i.left+i.width}).addClass("tipsy-west")}n.fade?t.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:.8}):t.css({visibility:"visible"})},function(){e.data(this,"cancel.tipsy",!1);var t=this;setTimeout(function(){if(e.data(this,"cancel.tipsy"))return;var r=e.data(t,"active.tipsy");n.fade?r.stop().fadeOut(function(){e(this).remove()}):r.remove()},100)})})};e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n};e.fn.tipsy.defaults={fade:!1,fallback:"",gravity:"n",html:!1,title:"title"};e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"};e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"}})(joms.jQuery);